<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="8301px" preserveAspectRatio="none" style="width:12156px;height:8301px;" version="1.1" viewBox="0 0 12156 8301" width="12156px" zoomAndPan="magnify"><defs><filter height="300%" id="f2eqvspei4rxi" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="35.2969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="190.5" y="2706.8047"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="2279.6563" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="374" y="48.2969"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="619.0078" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="374" y="2357.0859"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="184.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="374" y="3192.8906"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="219.8281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="374" y="3406.5547"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="619.0078" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1093.5" y="2357.0859"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="162.8594" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1444.5" y="2386.2188"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="94.5938" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2433.5" y="2425.3516"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="383.8828" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2433.5" y="2578.2109"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="158.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2433.5" y="3005.2266"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="271.4531" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="4010" y="2617.3438"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="141.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="4010" y="3222.0234"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="176.6953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="4010" y="3435.6875"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="4544.8359" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="4010" y="3684.6484"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="35.2969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="4760" y="2647.5078"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="4760" y="3762.0469"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="4760" y="3976.7109"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="5024" y="3933.5781"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="20.1641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="5212.5" y="2781.2344"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="56.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="5212.5" y="3251.1563"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="4119.375" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="5212.5" y="4089.1094"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="4" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11081" y="2870.7969"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="73.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11081" y="3525.25"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="4587.9688" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11237.5" y="3655.5156"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11353.5" y="3805.1797"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="20.1641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11492" y="2927.9297"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11492" y="3034.3594"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="184.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11492" y="3192.8906"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="219.8281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11492" y="3406.5547"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="20.1641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11685.5" y="2470.6484"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11685.5" y="3092.625"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11685.5" y="3135.7578"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11845" y="3554.3828"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="4587.9688" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11845" y="3655.5156"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="12010" y="3848.3125"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="1034.9844" style="stroke: #000000; stroke-width: 2.0;" width="2390.5" x="143" y="55.2969"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="975.8516" style="stroke: #000000; stroke-width: 2.0;" width="2370.5" x="153" y="93.4297"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="902.5859" style="stroke: #000000; stroke-width: 2.0;" width="2350.5" x="163" y="159.6953"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="17.1328" style="stroke: #000000; stroke-width: 2.0;" width="224" x="173" y="225.9609"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="798.1875" style="stroke: #000000; stroke-width: 2.0;" width="2214.5" x="289" y="257.0938"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="551.2578" style="stroke: #000000; stroke-width: 2.0;" width="2164.5" x="299" y="439.8906"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="435.8594" style="stroke: #000000; stroke-width: 2.0;" width="2144.5" x="309" y="548.2891"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="172.6641" style="stroke: #000000; stroke-width: 2.0;" width="1428" x="1015.5" y="572.4219"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="133.7969" style="stroke: #000000; stroke-width: 2.0;" width="1946.5" x="319" y="843.3516"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="150.6641" style="stroke: #000000; stroke-width: 2.0;" width="1871.5" x="163" y="1104.2813"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="17.1328" style="stroke: #000000; stroke-width: 2.0;" width="165" x="173" y="1157.5469"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="17.1328" style="stroke: #000000; stroke-width: 2.0;" width="192" x="173" y="1230.8125"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="719.5156" style="stroke: #000000; stroke-width: 2.0;" width="4118" x="163" y="1298.0781"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="17.1328" style="stroke: #000000; stroke-width: 2.0;" width="165" x="173" y="1351.3438"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="585.9844" style="stroke: #000000; stroke-width: 2.0;" width="2957" x="1314" y="1424.6094"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="554.8516" style="stroke: #000000; stroke-width: 2.0;" width="2937" x="1324" y="1448.7422"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="523.7188" style="stroke: #000000; stroke-width: 2.0;" width="2917" x="1334" y="1472.875"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="492.5859" style="stroke: #000000; stroke-width: 2.0;" width="2897" x="1344" y="1497.0078"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="60.2656" style="stroke: #000000; stroke-width: 2.0;" width="803.5" x="2965.5" y="1922.3281"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="195.9297" style="stroke: #000000; stroke-width: 2.0;" width="1012.5" x="2945.5" y="2073.7266"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="135.6641" style="stroke: #000000; stroke-width: 2.0;" width="992.5" x="2955.5" y="2126.9922"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="972.5" x="2965.5" y="2209.3906"/><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="1025.5" y="2276.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="1032.5" y="2296.6514">nsHTMLDocument</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="2383.5" y="2394.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="2390.5" y="2414.2139">nsHtmlParser</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="184" x="11596.5" y="2439.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="170" x="11603.5" y="2459.5107">nsHtml5TreeOpExecutor</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="3938" y="2586.2109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="3945" y="2606.2061">nsHtmlSreamParser</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="291" x="4617.5" y="2631.5078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="277" x="4624.5" y="2651.5029">nsHtml5OwningUTF16Buffer(Last buffer)</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="61" x="163" y="2690.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="170" y="2710.7998">builder</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="5145.5" y="2750.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="5152.5" y="2770.0967">nsHtml5Tokenizer</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="155" x="11006.5" y="2823.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="141" x="11013.5" y="2843.4951">nsISerialEventTarget</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="11407.5" y="2896.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="161" x="11414.5" y="2916.792">nsHtml5StreamListener</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="11175.5" y="3443.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="11182.5" y="3463.6826">nsHtml5Available</text><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="306.0625" style="stroke: #000000; stroke-width: 2.0;" width="8216.5" x="3918" y="3699.6484"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="274.9297" style="stroke: #000000; stroke-width: 2.0;" width="8196.5" x="3928" y="3723.7813"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="4196.7734" style="stroke: #000000; stroke-width: 2.0;" width="11989" x="13" y="4019.7109"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="17.1328" style="stroke: #000000; stroke-width: 2.0;" width="82" x="173" y="4043.8438"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="4091.375" style="stroke: #000000; stroke-width: 2.0;" width="11969" x="23" y="4104.1094"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="3973.9766" style="stroke: #000000; stroke-width: 2.0;" width="11949" x="33" y="4171.375"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="3942.8438" style="stroke: #000000; stroke-width: 2.0;" width="11929" x="43" y="4195.5078"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="260.9297" style="stroke: #000000; stroke-width: 2.0;" width="824" x="5125.5" y="4219.6406"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="145.5313" style="stroke: #000000; stroke-width: 2.0;" width="804" x="5135.5" y="4328.0391"/><rect fill="#FFFFFF" height="2" style="stroke: none; stroke-width: 1.0;" width="804" x="5135.5" y="4471.5703"/><rect fill="#FFFFFF" height="459.2656" style="stroke: none; stroke-width: 1.0;" width="11929" x="43" y="4530.7031"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="387.3281" style="stroke: #000000; stroke-width: 2.0;" width="840" x="5125.5" y="4552.5078"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="271.9297" style="stroke: #000000; stroke-width: 2.0;" width="820" x="5135.5" y="4660.9063"/><rect fill="#FFFFFF" height="2" style="stroke: none; stroke-width: 1.0;" width="820" x="5135.5" y="4930.8359"/><rect fill="#FFFFFF" height="3148.3828" style="stroke: none; stroke-width: 1.0;" width="11929" x="43" y="4989.9688"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="3119.5781" style="stroke: #000000; stroke-width: 2.0;" width="11909" x="53" y="5011.7734"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="3004.1797" style="stroke: #000000; stroke-width: 2.0;" width="11889" x="63" y="5120.1719"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="2747.5781" style="stroke: #000000; stroke-width: 2.0;" width="11869" x="73" y="5228.5703"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="2647.0469" style="stroke: #000000; stroke-width: 2.0;" width="11849" x="83" y="5322.1016"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="2572.7813" style="stroke: #000000; stroke-width: 2.0;" width="11829" x="93" y="5346.2344"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="2457.3828" style="stroke: #000000; stroke-width: 2.0;" width="11809" x="103" y="5454.6328"/><rect fill="#FFFFFF" height="901.9297" style="stroke: none; stroke-width: 1.0;" width="11809" x="103" y="5640.2969"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="873.125" style="stroke: #000000; stroke-width: 2.0;" width="7707" x="113" y="5662.1016"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="700.7891" style="stroke: #000000; stroke-width: 2.0;" width="7687" x="123" y="5686.2344"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="625.5234" style="stroke: #000000; stroke-width: 2.0;" width="7667" x="133" y="5710.3672"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="552.2578" style="stroke: #000000; stroke-width: 2.0;" width="7647" x="143" y="5776.6328"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="378.5938" style="stroke: #000000; stroke-width: 2.0;" width="7627" x="153" y="5829.8984"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="146.7969" style="stroke: #000000; stroke-width: 2.0;" width="7607" x="163" y="5980.4297"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="17.1328" style="stroke: #000000; stroke-width: 2.0;" width="2066" x="173" y="6073.9609"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="17.1328" style="stroke: #000000; stroke-width: 2.0;" width="798" x="173" y="6170.3594"/><rect fill="#FFFFFF" height="44.1328" style="stroke: none; stroke-width: 1.0;" width="7687" x="123" y="6342.8906"/><rect fill="#FFFFFF" height="14.8047" style="stroke: none; stroke-width: 1.0;" width="7707" x="113" y="6520.4219"/><rect fill="#FFFFFF" height="1369.7891" style="stroke: none; stroke-width: 1.0;" width="11809" x="103" y="6542.2266"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="1340.9844" style="stroke: #000000; stroke-width: 2.0;" width="11704" x="198" y="6564.0313"/><rect fill="#FFFFFF" height="1323.8516" style="stroke: none; stroke-width: 1.0;" width="11704" x="198" y="6581.1641"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="1295.0469" style="stroke: #000000; stroke-width: 2.0;" width="11684" x="208" y="6602.9688"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="1263.9141" style="stroke: #000000; stroke-width: 2.0;" width="11664" x="218" y="6627.1016"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="1146.5156" style="stroke: #000000; stroke-width: 2.0;" width="11563" x="228" y="6723.5"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="998.8516" style="stroke: #000000; stroke-width: 2.0;" width="10855.5" x="925.5" y="6864.1641"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="854.3203" style="stroke: #000000; stroke-width: 2.0;" width="10835.5" x="935.5" y="7001.6953"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="764.9219" style="stroke: #000000; stroke-width: 2.0;" width="10445.5" x="945.5" y="7084.0938"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="704.6563" style="stroke: #000000; stroke-width: 2.0;" width="10425.5" x="955.5" y="7137.3594"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="119.5313" style="stroke: #000000; stroke-width: 2.0;" width="1651" x="8683" y="7232.7578"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="59.2656" style="stroke: #000000; stroke-width: 2.0;" width="463" x="9358" y="7256.8906"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="468.7266" style="stroke: #000000; stroke-width: 2.0;" width="10405.5" x="965.5" y="7366.2891"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="395.4609" style="stroke: #000000; stroke-width: 2.0;" width="9880.5" x="975.5" y="7390.4219"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="293.0625" style="stroke: #000000; stroke-width: 2.0;" width="9860.5" x="985.5" y="7456.6875"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="261.9297" style="stroke: #000000; stroke-width: 2.0;" width="9840.5" x="995.5" y="7480.8203"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="230.7969" style="stroke: #000000; stroke-width: 2.0;" width="9820.5" x="1005.5" y="7504.9531"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="44.1328" style="stroke: #000000; stroke-width: 2.0;" width="331" x="1015.5" y="7684.6172"/><rect fill="#FFFFFF" height="99.0703" style="stroke: none; stroke-width: 1.0;" width="11889" x="63" y="8025.2813"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="195" x2="195" y1="2723.4531" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="278" x2="278" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="379" x2="379" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="487" x2="487" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="603" x2="603" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1098.5" x2="1098.5" y1="2309.3047" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1449" x2="1449" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1845.5" x2="1845.5" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2438.5" x2="2438.5" y1="2426.8672" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2903.5" x2="2903.5" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="3007.5" x2="3007.5" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="3702" x2="3702" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="3816" x2="3816" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="3900" x2="3900" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="4015" x2="4015" y1="2618.8594" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="4764.5" x2="4764.5" y1="2664.1563" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="5028.5" x2="5028.5" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="5217.5" x2="5217.5" y1="2782.75" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="6057" x2="6057" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="6624" x2="6624" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="7388" x2="7388" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="7516" x2="7516" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="7672" x2="7672" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="8028.5" x2="8028.5" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="8748" x2="8748" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="9462" x2="9462" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="10063.5" x2="10063.5" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="10202.5" x2="10202.5" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="10322.5" x2="10322.5" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="10820.5" x2="10820.5" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="11085.5" x2="11085.5" y1="2849.0977" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="11242.5" x2="11242.5" y1="3476.3359" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="11358.5" x2="11358.5" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="11496.5" x2="11496.5" y1="2929.4453" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="11690.5" x2="11690.5" y1="2472.1641" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="11849.5" x2="11849.5" y1="38.2969" y2="8261.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="12014.5" x2="12014.5" y1="38.2969" y2="8261.4844"/><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="61" x="163" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="170" y="8280.4795">builder</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="238" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="245" y="22.9951">operaton</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="238" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="245" y="8280.4795">operaton</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="329" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="336" y="22.9951">main thread</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="329" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="336" y="8280.4795">main thread</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="439" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="446" y="22.9951">nsDocShell</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="439" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="446" y="8280.4795">nsDocShell</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="545" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="552" y="22.9951">nsContentDLF</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="545" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="552" y="8280.4795">nsContentDLF</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="1025.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="1032.5" y="8280.4795">nsHTMLDocument</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="1386" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="1393" y="22.9951">nsHtml5module</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="1386" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="1393" y="8280.4795">nsHtml5module</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="1785.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="1792.5" y="22.9951">nsContentSink</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="1785.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="1792.5" y="8280.4795">nsContentSink</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="2383.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="2390.5" y="8280.4795">nsHtmlParser</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="2841.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="2848.5" y="22.9951">SheetLoadData</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="2841.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="2848.5" y="8280.4795">SheetLoadData</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="61" x="2975.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="2982.5" y="22.9951">Loader</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="61" x="2975.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="2982.5" y="8280.4795">Loader</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="3645" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="3652" y="22.9951">StreamLoader</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="3645" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="3652" y="8280.4795">StreamLoader</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="3770" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="3777" y="22.9951">StyleSheet</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="3770" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="3777" y="8280.4795">StyleSheet</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="52" x="3872" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="3879" y="22.9951">servo</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="52" x="3872" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="3879" y="8280.4795">servo</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="3938" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="3945" y="8280.4795">nsHtmlSreamParser</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="291" x="4617.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="277" x="4624.5" y="8280.4795">nsHtml5OwningUTF16Buffer(Last buffer)</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="209" x="4922.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="195" x="4929.5" y="22.9951">nsHtml5OwningUTF16Buffer</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="209" x="4922.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="195" x="4929.5" y="8280.4795">nsHtml5OwningUTF16Buffer</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="5145.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="5152.5" y="8280.4795">nsHtml5Tokenizer</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="5980" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="5987" y="22.9951">nsHtml5TreeBuilder</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="5980" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="5987" y="8280.4795">nsHtml5TreeBuilder</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="263" x="6491" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="249" x="6498" y="22.9951">nsHtml5TreeBuilderCppSupplement</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="263" x="6491" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="249" x="6498" y="8280.4795">nsHtml5TreeBuilderCppSupplement</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="7318" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="7325" y="22.9951">nsHtmlStackNode</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="7318" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="7325" y="8280.4795">nsHtmlStackNode</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="7469" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="7476" y="22.9951">nsIContent</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="7469" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="7476" y="8280.4795">nsIContent</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="7585" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="7592" y="22.9951">nsHtml5TreeOperation</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="7585" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="7592" y="8280.4795">nsHtml5TreeOperation</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="7978.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="7985.5" y="22.9951">nsNodeUtils</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="7978.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="7985.5" y="8280.4795">nsNodeUtils</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="8693" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="8700" y="22.9951">nsIPressShell</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="8693" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="8700" y="8280.4795">nsIPressShell</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="184" x="9368" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="170" x="9375" y="22.9951">nsCSSFrameConstructor</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="184" x="9368" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="170" x="9375" y="8280.4795">nsCSSFrameConstructor</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="10007.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="10014.5" y="22.9951">InsertionPoint</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="10007.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="10014.5" y="8280.4795">InsertionPoint</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="141" x="10130.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="127" x="10137.5" y="22.9951">nsContainerFrame</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="141" x="10130.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="127" x="10137.5" y="8280.4795">nsContainerFrame</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="10285.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="10292.5" y="22.9951">Element</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="10285.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="10292.5" y="8280.4795">Element</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="347" x="10645.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="333" x="10652.5" y="22.9951">nsHtml5SilentPolicy or nsHtml5ViewSourcePolicy</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="347" x="10645.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="333" x="10652.5" y="8280.4795">nsHtml5SilentPolicy or nsHtml5ViewSourcePolicy</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="155" x="11006.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="141" x="11013.5" y="8280.4795">nsISerialEventTarget</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="11175.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="11182.5" y="8280.4795">nsHtml5Available</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="74" x="11319.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="11326.5" y="22.9951">Decoder</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="74" x="11319.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="11326.5" y="8280.4795">Decoder</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="11407.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="161" x="11414.5" y="8280.4795">nsHtml5StreamListener</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="184" x="11596.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="170" x="11603.5" y="8280.4795">nsHtml5TreeOpExecutor</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="107" x="11794.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="11801.5" y="22.9951">parser thread</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="107" x="11794.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="11801.5" y="8280.4795">parser thread</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="11915.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="181" x="11922.5" y="22.9951">recordreplay(name space)</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="11915.5" y="8260.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="181" x="11922.5" y="8280.4795">recordreplay(name space)</text><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="35.2969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="190.5" y="2706.8047"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="2279.6563" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="374" y="48.2969"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="619.0078" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="374" y="2357.0859"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="184.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="374" y="3192.8906"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="219.8281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="374" y="3406.5547"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="619.0078" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1093.5" y="2357.0859"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="162.8594" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1444.5" y="2386.2188"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="94.5938" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2433.5" y="2425.3516"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="383.8828" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2433.5" y="2578.2109"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="158.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2433.5" y="3005.2266"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="271.4531" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="4010" y="2617.3438"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="141.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="4010" y="3222.0234"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="176.6953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="4010" y="3435.6875"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="4544.8359" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="4010" y="3684.6484"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="35.2969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="4760" y="2647.5078"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="4760" y="3762.0469"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="4760" y="3976.7109"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="5024" y="3933.5781"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="20.1641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="5212.5" y="2781.2344"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="56.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="5212.5" y="3251.1563"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="4119.375" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="5212.5" y="4089.1094"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="4" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11081" y="2870.7969"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="73.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11081" y="3525.25"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="4587.9688" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11237.5" y="3655.5156"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11353.5" y="3805.1797"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="20.1641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11492" y="2927.9297"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11492" y="3034.3594"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="184.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11492" y="3192.8906"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="219.8281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11492" y="3406.5547"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="20.1641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11685.5" y="2470.6484"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11685.5" y="3092.625"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11685.5" y="3135.7578"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11845" y="3554.3828"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="4587.9688" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="11845" y="3655.5156"/><rect fill="#FFFFFF" filter="url(#f2eqvspei4rxi)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="12010" y="3848.3125"/><path d="M143,55.2969 L519,55.2969 L519,62.2969 L509,72.2969 L143,72.2969 L143,55.2969 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1034.9844" style="stroke: #000000; stroke-width: 2.0;" width="2390.5" x="143" y="55.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="331" x="158" y="68.3638">nsresult nsDocShell::NewContentViewerObj()</text><polygon fill="#A80036" points="591.5,74.4297,601.5,78.4297,591.5,82.4297,595.5,78.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="487" x2="597.5" y1="78.4297" y2="78.4297"/><path d="M153,93.4297 L434,93.4297 L434,100.4297 L424,110.4297 L153,110.4297 L153,93.4297 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="975.8516" style="stroke: #000000; stroke-width: 2.0;" width="2370.5" x="153" y="93.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="236" x="168" y="106.4966">nsContentDLF::CreateInstance()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="603.5" x2="645.5" y1="131.6953" y2="131.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="645.5" x2="645.5" y1="131.6953" y2="144.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="604.5" x2="645.5" y1="144.6953" y2="144.6953"/><polygon fill="#A80036" points="614.5,140.6953,604.5,144.6953,614.5,148.6953,610.5,144.6953" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="481" x="610.5" y="126.6294">aDocumentCreator : () -&gt; {NS_NewHTMLDocument(getter_AddRefs(doc))}</text><path d="M163,159.6953 L849,159.6953 L849,166.6953 L839,176.6953 L163,176.6953 L163,159.6953 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="902.5859" style="stroke: #000000; stroke-width: 2.0;" width="2350.5" x="163" y="159.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="641" x="178" y="172.7622">nsContentDLF::CreateDocument(nsContentDLF::DocumentCreator aDocumentCreator,)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="603.5" x2="645.5" y1="197.9609" y2="197.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="645.5" x2="645.5" y1="197.9609" y2="210.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="604.5" x2="645.5" y1="210.9609" y2="210.9609"/><polygon fill="#A80036" points="614.5,206.9609,604.5,210.9609,614.5,214.9609,610.5,210.9609" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="310" x="610.5" y="192.895">RefPtr&lt;Document&gt; doc = aDocumentCreator();</text><path d="M173,225.9609 L392,225.9609 L392,232.9609 L382,242.9609 L173,242.9609 L173,225.9609 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="17.1328" style="stroke: #000000; stroke-width: 2.0;" width="224" x="173" y="225.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="174" x="188" y="239.0278">NS_NewHTMLDocument</text><path d="M289,257.0938 L481,257.0938 L481,264.0938 L471,274.0938 L289,274.0938 L289,257.0938 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="798.1875" style="stroke: #000000; stroke-width: 2.0;" width="2214.5" x="289" y="257.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="304" y="270.1606">StartDocumentLoad</text><polygon fill="#A80036" points="1086.5,306.4922,1096.5,310.4922,1086.5,314.4922,1090.5,310.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="603.5" x2="1092.5" y1="310.4922" y2="310.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="610.5" y="290.2935">rv = doc-&gt;StartDocumentLoad(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="434" x="610.5" y="305.4263">aCommand, aChannel, aLoadGroup, aContainer, DocListener, true);</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1098.5" x2="1140.5" y1="339.625" y2="339.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1140.5" x2="1140.5" y1="339.625" y2="352.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1099.5" x2="1140.5" y1="352.625" y2="352.625"/><polygon fill="#A80036" points="1109.5,348.625,1099.5,352.625,1109.5,356.625,1105.5,352.625" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="337" x="1105.5" y="334.5591">mParser = nsHtml5Module::NewHtml5Parser(); L552</text><polygon fill="#A80036" points="1833.5,377.7578,1843.5,381.7578,1833.5,385.7578,1837.5,381.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1098.5" x2="1839.5" y1="381.7578" y2="381.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="278" x="1105.5" y="376.6919">nsCOMPtr&lt;nsIHTMLContentSink&gt; htmlsink;</text><polygon fill="#A80036" points="1109.5,391.7578,1099.5,395.7578,1109.5,399.7578,1105.5,395.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1103.5" x2="1844.5" y1="395.7578" y2="395.7578"/><polygon fill="#A80036" points="1833.5,420.8906,1843.5,424.8906,1833.5,428.8906,1837.5,424.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1098.5" x2="1839.5" y1="424.8906" y2="424.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="527" x="1105.5" y="419.8247">NS_NewHTMLContentSink(getter_AddRefs(htmlsink), this, uri, docShell, aChannel);</text><path d="M299,439.8906 L532,439.8906 L532,446.8906 L522,456.8906 L299,456.8906 L299,439.8906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="551.2578" style="stroke: #000000; stroke-width: 2.0;" width="2164.5" x="299" y="439.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="188" x="314" y="452.9575">NS_NewHTMLContentSink</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1845.5" x2="1887.5" y1="478.1563" y2="478.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1887.5" x2="1887.5" y1="478.1563" y2="491.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1846.5" x2="1887.5" y1="491.1563" y2="491.1563"/><polygon fill="#A80036" points="1856.5,487.1563,1846.5,491.1563,1856.5,495.1563,1852.5,491.1563" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="1852.5" y="473.0903">it = new HTMLContentSink();</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1845.5" x2="1887.5" y1="520.2891" y2="520.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1887.5" x2="1887.5" y1="520.2891" y2="533.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1846.5" x2="1887.5" y1="533.2891" y2="533.2891"/><polygon fill="#A80036" points="1856.5,529.2891,1846.5,533.2891,1856.5,537.2891,1852.5,533.2891" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="359" x="1852.5" y="515.2231">nsresult rv = it-&gt;Init(aDoc, aURI, aContainer, aChannel);</text><path d="M309,548.2891 L799,548.2891 L799,555.2891 L789,565.2891 L309,565.2891 L309,548.2891 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="435.8594" style="stroke: #000000; stroke-width: 2.0;" width="2144.5" x="309" y="548.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="445" x="324" y="561.356">nsContentSink::Init(Document* aDoc, nsIChannel* aChannel)</text><path d="M1015.5,572.4219 L1182.5,572.4219 L1182.5,579.4219 L1172.5,589.4219 L1015.5,589.4219 L1015.5,572.4219 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="172.6641" style="stroke: #000000; stroke-width: 2.0;" width="1428" x="1015.5" y="572.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="1030.5" y="585.4888">header情報の取得</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1845.5" x2="1887.5" y1="610.6875" y2="610.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1887.5" x2="1887.5" y1="610.6875" y2="623.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1846.5" x2="1887.5" y1="623.6875" y2="623.6875"/><polygon fill="#A80036" points="1856.5,619.6875,1846.5,623.6875,1856.5,627.6875,1852.5,623.6875" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="460" x="1852.5" y="605.6216">nsCOMPtr&lt;nsIHttpChannel&gt; httpchannel(do_QueryInterface(aChannel))</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1845.5" x2="1887.5" y1="652.8203" y2="652.8203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1887.5" x2="1887.5" y1="652.8203" y2="665.8203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1846.5" x2="1887.5" y1="665.8203" y2="665.8203"/><polygon fill="#A80036" points="1856.5,661.8203,1846.5,665.8203,1856.5,669.8203,1852.5,665.8203" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="1852.5" y="647.7544">nsAutoCString linkHeader;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1845.5" x2="1887.5" y1="694.9531" y2="694.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1887.5" x2="1887.5" y1="694.9531" y2="707.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1846.5" x2="1887.5" y1="707.9531" y2="707.9531"/><polygon fill="#A80036" points="1856.5,703.9531,1846.5,707.9531,1856.5,711.9531,1852.5,707.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="579" x="1852.5" y="689.8872">nsresult rv = httpchannel-&gt;GetResponseHeader(NS_LITERAL_CSTRING("link"), linkHeader);</text><polygon fill="#A80036" points="1109.5,733.0859,1099.5,737.0859,1109.5,741.0859,1105.5,737.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1103.5" x2="1844.5" y1="737.0859" y2="737.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="561" x="1115.5" y="732.02">mDocument-&gt;SetHeaderData(nsGkAtoms::link, NS_ConvertASCIItoUTF16(linkHeader));</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1845.5" x2="1887.5" y1="773.2188" y2="773.2188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1887.5" x2="1887.5" y1="773.2188" y2="786.2188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1846.5" x2="1887.5" y1="786.2188" y2="786.2188"/><polygon fill="#A80036" points="1856.5,782.2188,1846.5,786.2188,1856.5,790.2188,1852.5,786.2188" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="1852.5" y="768.1528">mDocument = aDoc;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1845.5" x2="1887.5" y1="815.3516" y2="815.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1887.5" x2="1887.5" y1="815.3516" y2="828.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1846.5" x2="1887.5" y1="828.3516" y2="828.3516"/><polygon fill="#A80036" points="1856.5,824.3516,1846.5,828.3516,1856.5,832.3516,1852.5,828.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="1852.5" y="810.2856">ProcessHTTPHeaders(aChannel);</text><path d="M319,843.3516 L533,843.3516 L533,850.3516 L523,860.3516 L319,860.3516 L319,843.3516 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="133.7969" style="stroke: #000000; stroke-width: 2.0;" width="1946.5" x="319" y="843.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="169" x="334" y="856.4185">ProcessHTTPHeaders()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1845.5" x2="1887.5" y1="927.0156" y2="927.0156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1887.5" x2="1887.5" y1="927.0156" y2="940.0156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1846.5" x2="1887.5" y1="940.0156" y2="940.0156"/><polygon fill="#A80036" points="1856.5,936.0156,1846.5,940.0156,1856.5,944.0156,1852.5,940.0156" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="401" x="1852.5" y="876.5513">mProcessLinkHeaderEvent = NewNonOwningRunnableMethod(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="1852.5" y="891.6841">"nsContentSink::DoProcessLinkHeader",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="27" x="1856.5" y="906.8169">this,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="261" x="1856.5" y="921.9497">&amp;nsContentSink::DoProcessLinkHeader);</text><polygon fill="#A80036" points="395,965.1484,385,969.1484,395,973.1484,391,969.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="1844.5" y1="969.1484" y2="969.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="668" x="401" y="964.0825">rv = NS_DispatchToCurrentThread(mProcessLinkHeaderEvent.get()); 現在のthreadにイベントを投げつける</text><polygon fill="#A80036" points="1109.5,1000.1484,1099.5,1004.1484,1109.5,1008.1484,1105.5,1004.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1103.5" x2="1844.5" y1="1004.1484" y2="1004.1484"/><polygon fill="#A80036" points="2426.5,1029.2813,2436.5,1033.2813,2426.5,1037.2813,2430.5,1033.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1098.5" x2="2432.5" y1="1033.2813" y2="1033.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="1107" x="1105.5" y="1028.2153">mParser-&gt;SetContentSink(htmlsink); //L691, mParserはaDocumentCreator内で作られているのか? -&gt; 同じメソッド内でmParser = nsHtml5Module::NewHtml5Parser()されていた</text><polygon fill="#A80036" points="614.5,1043.2813,604.5,1047.2813,614.5,1051.2813,610.5,1047.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="608.5" x2="1097.5" y1="1047.2813" y2="1047.2813"/><polygon fill="#A80036" points="498,1078.2813,488,1082.2813,498,1086.2813,494,1082.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="492" x2="602.5" y1="1082.2813" y2="1082.2813"/><path d="M163,1104.2813 L486,1104.2813 L486,1111.2813 L476,1121.2813 L163,1121.2813 L163,1104.2813 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="150.6641" style="stroke: #000000; stroke-width: 2.0;" width="1871.5" x="163" y="1104.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="278" x="178" y="1117.3481">nsContentSink::DoProcessLinkHeader</text><polygon fill="#A80036" points="1109.5,1138.5469,1099.5,1142.5469,1109.5,1146.5469,1105.5,1142.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1103.5" x2="1844.5" y1="1142.5469" y2="1142.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="723" x="1115.5" y="1137.481">mDocument-&gt;GetHeaderData(nsGkAtoms::link, value); その前にSetHeaderDataが呼ばれているはず(Initでしていた)</text><path d="M173,1157.5469 L333,1157.5469 L333,1164.5469 L323,1174.5469 L173,1174.5469 L173,1157.5469 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="17.1328" style="stroke: #000000; stroke-width: 2.0;" width="165" x="173" y="1157.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="188" y="1170.6138">GetHeaderData</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1845.5" x2="1887.5" y1="1202.8125" y2="1202.8125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1887.5" x2="1887.5" y1="1202.8125" y2="1215.8125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1846.5" x2="1887.5" y1="1215.8125" y2="1215.8125"/><polygon fill="#A80036" points="1856.5,1211.8125,1846.5,1215.8125,1856.5,1219.8125,1852.5,1215.8125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="1852.5" y="1197.7466">ProcessLinkHeader(value);</text><path d="M173,1230.8125 L360,1230.8125 L360,1237.8125 L350,1247.8125 L173,1247.8125 L173,1230.8125 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="17.1328" style="stroke: #000000; stroke-width: 2.0;" width="192" x="173" y="1230.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="188" y="1243.8794">ProcessLinkHeader</text><polygon fill="#A80036" points="1833.5,1279.0781,1843.5,1283.0781,1833.5,1287.0781,1837.5,1283.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="1839.5" y1="1283.0781" y2="1283.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="716" x="391" y="1278.0122">rv = NS_DispatchToCurrentThread(mProcessLinkHeaderEvent.get()); // 多分main threadなんだろうけど調べてない</text><path d="M163,1298.0781 L486,1298.0781 L486,1305.0781 L476,1315.0781 L163,1315.0781 L163,1298.0781 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="719.5156" style="stroke: #000000; stroke-width: 2.0;" width="4118" x="163" y="1298.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="278" x="178" y="1311.145">nsContentSink::DoProcessLinkHeader</text><polygon fill="#A80036" points="1109.5,1332.3438,1099.5,1336.3438,1109.5,1340.3438,1105.5,1336.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1103.5" x2="1844.5" y1="1336.3438" y2="1336.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="723" x="1115.5" y="1331.2778">mDocument-&gt;GetHeaderData(nsGkAtoms::link, value); その前にSetHeaderDataが呼ばれているはず(Initでしていた)</text><path d="M173,1351.3438 L333,1351.3438 L333,1358.3438 L323,1368.3438 L173,1368.3438 L173,1351.3438 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="17.1328" style="stroke: #000000; stroke-width: 2.0;" width="165" x="173" y="1351.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="188" y="1364.4106">GetHeaderData</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1845.5" x2="1887.5" y1="1396.6094" y2="1396.6094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1887.5" x2="1887.5" y1="1396.6094" y2="1409.6094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1846.5" x2="1887.5" y1="1409.6094" y2="1409.6094"/><polygon fill="#A80036" points="1856.5,1405.6094,1846.5,1409.6094,1856.5,1413.6094,1852.5,1409.6094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="1852.5" y="1391.5435">ProcessLinkHeader(value);</text><path d="M1314,1424.6094 L1501,1424.6094 L1501,1431.6094 L1491,1441.6094 L1314,1441.6094 L1314,1424.6094 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="585.9844" style="stroke: #000000; stroke-width: 2.0;" width="2957" x="1314" y="1424.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="1329" y="1437.6763">ProcessLinkHeader</text><path d="M1324,1448.7422 L1549,1448.7422 L1549,1455.7422 L1539,1465.7422 L1324,1465.7422 L1324,1448.7422 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="554.8516" style="stroke: #000000; stroke-width: 2.0;" width="2937" x="1324" y="1448.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="1339" y="1461.8091">ProcessLinkFromHeader</text><path d="M1334,1472.875 L1595,1472.875 L1595,1479.875 L1585,1489.875 L1334,1489.875 L1334,1472.875 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="523.7188" style="stroke: #000000; stroke-width: 2.0;" width="2917" x="1334" y="1472.875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="216" x="1349" y="1485.9419">ProcessStyleLinkFromHeader</text><path d="M1344,1497.0078 L1552,1497.0078 L1552,1504.0078 L1542,1514.0078 L1344,1514.0078 L1344,1497.0078 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="492.5859" style="stroke: #000000; stroke-width: 2.0;" width="2897" x="1344" y="1497.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="163" x="1359" y="1510.0747">Loader::LoadStyleLink</text><polygon fill="#A80036" points="2891.5,1702.7344,2901.5,1706.7344,2891.5,1710.7344,2895.5,1706.7344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1845.5" x2="2897.5" y1="1706.7344" y2="1706.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="1034" x="1852.5" y="1701.6685">SheetLoadData* data = new SheetLoadData(this, aInfo.mTitle, aInfo.mURI, sheet, syncLoad, owningElement, isAlternate, matched, aObserver, principal, context);</text><path d="M1354,1519.1406 L1354,1877.1406 L1836,1877.1406 L1836,1529.1406 L1826,1519.1406 L1354,1519.1406 " fill="#FBFB77" filter="url(#f2eqvspei4rxi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1826,1519.1406 L1826,1529.1406 L1836,1529.1406 L1826,1519.1406 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="1365.5" cy="1531.7734" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="1371" y="1536.2075">OVERALL ARCHITECTURE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="1360" y="1551.3403">*</text><ellipse cx="1365.5" cy="1562.0391" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="429" x="1371" y="1566.4731">The CSS Loader gets requests to load various sorts of style sheets:</text><ellipse cx="1365.5" cy="1577.1719" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="417" x="1371" y="1581.606">inline style from &lt;style&gt; elements, linked style, @import-ed child</text><ellipse cx="1365.5" cy="1592.3047" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="450" x="1371" y="1596.7388">sheets, non-document sheets.  The loader handles the following tasks:</text><ellipse cx="1365.5" cy="1607.4375" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="378" x="1371" y="1611.8716">1) Creation of the actual style sheet objects: CreateSheet()</text><ellipse cx="1365.5" cy="1622.5703" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="380" x="1371" y="1627.0044">2) setting of the right media, title, enabled state, etc on the</text><ellipse cx="1365.5" cy="1637.7031" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="1371" y="1642.1372">sheet: PrepareSheet()</text><ellipse cx="1365.5" cy="1652.8359" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="338" x="1371" y="1657.27">3) Insertion of the sheet in the proper cascade order:</text><ellipse cx="1365.5" cy="1667.9688" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="270" x="1371" y="1672.4028">InsertSheetInTree() and InsertChildSheet()</text><ellipse cx="1365.5" cy="1683.1016" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="378" x="1371" y="1687.5356">4) Load of the sheet: LoadSheet() including security checks</text><ellipse cx="1365.5" cy="1698.2344" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="237" x="1371" y="1702.6685">5) Parsing of the sheet: ParseSheet()</text><ellipse cx="1365.5" cy="1713.3672" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="1371" y="1717.8013">6) Cleanup: SheetComplete()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="1360" y="1732.9341">*</text><ellipse cx="1365.5" cy="1743.6328" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="410" x="1371" y="1748.0669">The detailed documentation for these functions is found with the</text><ellipse cx="1365.5" cy="1758.7656" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="1371" y="1763.1997">function implementations.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="1360" y="1778.3325">*</text><ellipse cx="1365.5" cy="1789.0313" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="1371" y="1793.4653">The following helper object is used:</text><ellipse cx="1365.5" cy="1804.1641" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="376" x="1371" y="1808.5981">SheetLoadData -- a small class that is used to store all the</text><ellipse cx="1365.5" cy="1819.2969" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="293" x="1371" y="1823.731">information needed for the loading of a sheet;</text><ellipse cx="1365.5" cy="1834.4297" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="266" x="1371" y="1838.8638">this class handles listening for the stream</text><ellipse cx="1365.5" cy="1849.5625" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="279" x="1371" y="1853.9966">loader completion and also handles charset</text><ellipse cx="1365.5" cy="1864.6953" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="1371" y="1869.1294">determination.</text><polygon fill="#A80036" points="2996,1903.3281,3006,1907.3281,2996,1911.3281,3000,1907.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1845.5" x2="3002" y1="1907.3281" y2="1907.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="1852.5" y="1902.2622">rv = LoadSheet(data, state, false);</text><path d="M2965.5,1922.3281 L3149.5,1922.3281 L3149.5,1929.3281 L3139.5,1939.3281 L2965.5,1939.3281 L2965.5,1922.3281 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="60.2656" style="stroke: #000000; stroke-width: 2.0;" width="803.5" x="2965.5" y="1922.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="139" x="2980.5" y="1935.395">Loader::LoadSheet</text><path d="M3774,1927.3281 L3774,2027.3281 L4222,2027.3281 L4222,1937.3281 L4212,1927.3281 L3774,1927.3281 " fill="#FBFB77" filter="url(#f2eqvspei4rxi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M4212,1927.3281 L4212,1937.3281 L4222,1937.3281 L4212,1927.3281 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="379" x="3780" y="1944.395">LoadSheet handles the actual load of a sheet.  If the load is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="427" x="3780" y="1959.5278">supposed to be synchronous it just opens a channel synchronously</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="388" x="3780" y="1974.6606">using the given uri, wraps the resulting stream in a converter</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="391" x="3780" y="1989.7935">stream and calls ParseSheet.  Otherwise it tries to look for an</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="385" x="3780" y="2004.9263">existing load for this URI and piggyback on it.  Failing all that,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="253" x="3780" y="2020.0591">a new load is kicked off asynchronously.</text><polygon fill="#A80036" points="3690,1956.5938,3700,1960.5938,3690,1964.5938,3694,1960.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3008" x2="3696" y1="1960.5938" y2="1960.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="314" x="3015" y="1955.5278">streamLoader = new StreamLoader(aLoadData);</text><polygon fill="#A80036" points="3019,1970.5938,3009,1974.5938,3019,1978.5938,3015,1974.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3013" x2="3701" y1="1974.5938" y2="1974.5938"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3702" x2="3744" y1="2045.7266" y2="2045.7266"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3744" x2="3744" y1="2045.7266" y2="2058.7266"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3703" x2="3744" y1="2058.7266" y2="2058.7266"/><polygon fill="#A80036" points="3713,2054.7266,3703,2058.7266,3713,2062.7266,3709,2058.7266" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="3709" y="2040.6606">OnStopRequest</text><path d="M2945.5,2073.7266 L3219.5,2073.7266 L3219.5,2080.7266 L3209.5,2090.7266 L2945.5,2090.7266 L2945.5,2073.7266 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="195.9297" style="stroke: #000000; stroke-width: 2.0;" width="1012.5" x="2945.5" y="2073.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="229" x="2960.5" y="2086.7935">StreamLoader::OnStopRequest</text><polygon fill="#A80036" points="3019,2107.9922,3009,2111.9922,3019,2115.9922,3015,2111.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3013" x2="3701" y1="2111.9922" y2="2111.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="670" x="3025" y="2106.9263">mSheetLoadData-&gt;mLoader-&gt;ParseSheet(utf8String, mSheetLoadData, Loader::AllowAsyncParse::Yes);</text><path d="M2955.5,2126.9922 L3145.5,2126.9922 L3145.5,2133.9922 L3135.5,2143.9922 L2955.5,2143.9922 L2955.5,2126.9922 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="135.6641" style="stroke: #000000; stroke-width: 2.0;" width="992.5" x="2955.5" y="2126.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="145" x="2970.5" y="2140.0591">Loader::ParseSheet</text><polygon fill="#A80036" points="3804,2161.2578,3814,2165.2578,3804,2169.2578,3808,2165.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3008" x2="3810" y1="2165.2578" y2="2165.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="277" x="3015" y="2160.1919">StyleSheet* sheet = aLoadData-&gt;mSheet;</text><polygon fill="#A80036" points="3804,2190.3906,3814,2194.3906,3804,2198.3906,3808,2194.3906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3008" x2="3810" y1="2194.3906" y2="2194.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="358" x="3015" y="2189.3247">sheet-&gt;ParseSheet(this, aBytes, aLoadData)-&gt;Then(...)</text><path d="M2965.5,2209.3906 L3182.5,2209.3906 L3182.5,2216.3906 L3172.5,2226.3906 L2965.5,2226.3906 L2965.5,2209.3906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="972.5" x="2965.5" y="2209.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="2980.5" y="2222.4575">StyleSheet::ParseSheet</text><polygon fill="#A80036" points="3888,2243.6563,3898,2247.6563,3888,2251.6563,3892,2247.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3008" x2="3894" y1="2247.6563" y2="2247.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="260" x="3015" y="2242.5903">Servo_StyleSheet_FromUTF8BytesAsync</text><polygon fill="#A80036" points="1013.5,2293.7891,1023.5,2297.7891,1013.5,2301.7891,1017.5,2297.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="1019.5" y1="2297.7891" y2="2297.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="391" y="2292.7231">create?</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="1025.5" y="2276.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="1032.5" y="2296.6514">nsHTMLDocument</text><polygon fill="#A80036" points="390,2323.9531,380,2327.9531,390,2331.9531,386,2327.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="1097.5" y1="2327.9531" y2="2327.9531"/><polygon fill="#A80036" points="1081.5,2353.0859,1091.5,2357.0859,1081.5,2361.0859,1085.5,2357.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="1087.5" y1="2357.0859" y2="2357.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="391" y="2352.02">do_QueryInterface</text><polygon fill="#A80036" points="1432.5,2382.2188,1442.5,2386.2188,1432.5,2390.2188,1436.5,2386.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1103.5" x2="1438.5" y1="2386.2188" y2="2386.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="227" x="1110.5" y="2381.1528">nsHtml5module::NewHtml5Parser()</text><polygon fill="#A80036" points="2371.5,2411.3516,2381.5,2415.3516,2371.5,2419.3516,2375.5,2415.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1454.5" x2="2377.5" y1="2415.3516" y2="2415.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="1461.5" y="2410.2856">new Html5Parser()</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="2383.5" y="2394.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="2390.5" y="2414.2139">nsHtmlParser</text><polygon fill="#A80036" points="11584.5,2456.6484,11594.5,2460.6484,11584.5,2464.6484,11588.5,2460.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2443.5" x2="11590.5" y1="2460.6484" y2="2460.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="274" x="2450.5" y="2455.5825">mExecutor(new nsHtml5TreeOpExecutor())</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="184" x="11596.5" y="2439.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="170" x="11603.5" y="2459.5107">nsHtml5TreeOpExecutor</text><polygon fill="#A80036" points="2454.5,2486.8125,2444.5,2490.8125,2454.5,2494.8125,2450.5,2490.8125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2448.5" x2="11689.5" y1="2490.8125" y2="2490.8125"/><polygon fill="#A80036" points="1465.5,2515.9453,1455.5,2519.9453,1465.5,2523.9453,1461.5,2519.9453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1459.5" x2="2437.5" y1="2519.9453" y2="2519.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="1471.5" y="2514.8794">Html5Parser</text><polygon fill="#A80036" points="1114.5,2545.0781,1104.5,2549.0781,1114.5,2553.0781,1110.5,2549.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1108.5" x2="1448.5" y1="2549.0781" y2="2549.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="1120.5" y="2544.0122">Html5Parser</text><polygon fill="#A80036" points="2421.5,2574.2109,2431.5,2578.2109,2421.5,2582.2109,2425.5,2578.2109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1103.5" x2="2427.5" y1="2578.2109" y2="2578.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="1110.5" y="2573.145">MarkAsNotScriptCreated()</text><polygon fill="#A80036" points="3926,2603.3438,3936,2607.3438,3926,2611.3438,3930,2607.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2443.5" x2="3932" y1="2607.3438" y2="2607.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="2450.5" y="2602.2778">new nsHtml5StreamParser</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="3938" y="2586.2109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="3945" y="2606.2061">nsHtmlSreamParser</text><polygon fill="#A80036" points="4605.5,2633.5078,4615.5,2637.5078,4605.5,2641.5078,4609.5,2637.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4020" x2="4611.5" y1="2637.5078" y2="2637.5078"/><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="291" x="4617.5" y="2631.5078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="277" x="4624.5" y="2651.5029">nsHtml5OwningUTF16Buffer(Last buffer)</text><polygon fill="#A80036" points="4031,2678.8047,4021,2682.8047,4031,2686.8047,4027,2682.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="4025" x2="4764" y1="2682.8047" y2="2682.8047"/><polygon fill="#A80036" points="239,2692.8047,229,2696.8047,239,2700.8047,235,2696.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="233" x2="4009" y1="2696.8047" y2="2696.8047"/><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="61" x="163" y="2690.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="170" y="2710.7998">builder</text><polygon fill="#A80036" points="3998,2738.1016,4008,2742.1016,3998,2746.1016,4002,2742.1016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="195.5" x2="4004" y1="2742.1016" y2="2742.1016"/><polygon fill="#A80036" points="5133.5,2767.2344,5143.5,2771.2344,5133.5,2775.2344,5137.5,2771.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4020" x2="5139.5" y1="2771.2344" y2="2771.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="4027" y="2766.1685">with builder</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="5145.5" y="2750.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="5152.5" y="2770.0967">nsHtml5Tokenizer</text><polygon fill="#A80036" points="4031,2797.3984,4021,2801.3984,4031,2805.3984,4027,2801.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="4025" x2="5216.5" y1="2801.3984" y2="2801.3984"/><polygon fill="#A80036" points="10994.5,2856.7969,11004.5,2860.7969,10994.5,2864.7969,10998.5,2860.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4020" x2="11000.5" y1="2860.7969" y2="2860.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="4027" y="2825.4653">initialize(nsHtml5Module</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="4027" y="2840.5981">::GetStreamParserThread()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="4027" y="2855.731">-&gt;SerialEventTarget())</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="155" x="11006.5" y="2823.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="141" x="11013.5" y="2843.4951">nsISerialEventTarget</text><polygon fill="#A80036" points="4031,2870.7969,4021,2874.7969,4031,2878.7969,4027,2874.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="4025" x2="11085" y1="2874.7969" y2="2874.7969"/><polygon fill="#A80036" points="2454.5,2884.7969,2444.5,2888.7969,2454.5,2892.7969,2450.5,2888.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2448.5" x2="4014" y1="2888.7969" y2="2888.7969"/><polygon fill="#A80036" points="11395.5,2913.9297,11405.5,2917.9297,11395.5,2921.9297,11399.5,2917.9297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2443.5" x2="11401.5" y1="2917.9297" y2="2917.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="279" x="2450.5" y="2912.8638">new nsHtml5StreamListener(streamParser)</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="11407.5" y="2896.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="161" x="11414.5" y="2916.792">nsHtml5StreamListener</text><polygon fill="#A80036" points="2454.5,2944.0938,2444.5,2948.0938,2454.5,2952.0938,2450.5,2948.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2448.5" x2="11496" y1="2948.0938" y2="2948.0938"/><polygon fill="#A80036" points="1114.5,2958.0938,1104.5,2962.0938,1114.5,2966.0938,1110.5,2962.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1108.5" x2="2437.5" y1="2962.0938" y2="2962.0938"/><polygon fill="#A80036" points="390,2972.0938,380,2976.0938,390,2980.0938,386,2976.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="1097.5" y1="2976.0938" y2="2976.0938"/><polygon fill="#A80036" points="2421.5,3001.2266,2431.5,3005.2266,2421.5,3009.2266,2425.5,3005.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1098.5" x2="2427.5" y1="3005.2266" y2="3005.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="1105.5" y="3000.1606">nsHtml5Parser::Parse()</text><polygon fill="#A80036" points="11480,3030.3594,11490,3034.3594,11480,3038.3594,11484,3034.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2443.5" x2="11486" y1="3034.3594" y2="3034.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="2450.5" y="3029.2935">GetDelegate();</text><polygon fill="#A80036" points="2454.5,3059.4922,2444.5,3063.4922,2454.5,3067.4922,2450.5,3063.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2448.5" x2="11496" y1="3063.4922" y2="3063.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="199" x="2460.5" y="3058.4263">mDelegate === streamParser</text><polygon fill="#A80036" points="11673.5,3088.625,11683.5,3092.625,11673.5,3096.625,11677.5,3092.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2443.5" x2="11679.5" y1="3092.625" y2="3092.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="2450.5" y="3087.5591">SetStreamParser(streamParser)</text><polygon fill="#A80036" points="2454.5,3102.625,2444.5,3106.625,2454.5,3110.625,2450.5,3106.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2448.5" x2="11689.5" y1="3106.625" y2="3106.625"/><polygon fill="#A80036" points="11673.5,3131.7578,11683.5,3135.7578,11673.5,3139.7578,11677.5,3135.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2443.5" x2="11679.5" y1="3135.7578" y2="3135.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="2450.5" y="3130.6919">SetParser(this)</text><polygon fill="#A80036" points="2454.5,3145.7578,2444.5,3149.7578,2454.5,3153.7578,2450.5,3149.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2448.5" x2="11689.5" y1="3149.7578" y2="3149.7578"/><polygon fill="#A80036" points="1109.5,3159.7578,1099.5,3163.7578,1109.5,3167.7578,1105.5,3163.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1103.5" x2="2437.5" y1="3163.7578" y2="3163.7578"/><polygon fill="#A80036" points="11480,3188.8906,11490,3192.8906,11480,3196.8906,11484,3192.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="11486" y1="3192.8906" y2="3192.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="391" y="3187.8247">OnStartRequest</text><polygon fill="#A80036" points="4031,3218.0234,4021,3222.0234,4031,3226.0234,4027,3222.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4025" x2="11491" y1="3222.0234" y2="3222.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="4037" y="3216.9575">OnStartRequest</text><polygon fill="#A80036" points="5200.5,3247.1563,5210.5,3251.1563,5200.5,3255.1563,5204.5,3251.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4020" x2="5206.5" y1="3251.1563" y2="3251.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="4027" y="3246.0903">mTokenizer-&gt;start()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="3280.2891" y2="3280.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="3280.2891" y2="3293.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="3293.2891" y2="3293.2891"/><polygon fill="#A80036" points="5233.5,3289.2891,5223.5,3293.2891,5233.5,3297.2891,5229.5,3293.2891" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="5229.5" y="3275.2231">mode = INITIAL</text><polygon fill="#A80036" points="4031,3303.2891,4021,3307.2891,4031,3311.2891,4027,3307.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="4025" x2="5216.5" y1="3307.2891" y2="3307.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4020" x2="4062" y1="3336.4219" y2="3336.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4062" x2="4062" y1="3336.4219" y2="3349.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4021" x2="4062" y1="3349.4219" y2="3349.4219"/><polygon fill="#A80036" points="4031,3345.4219,4021,3349.4219,4031,3353.4219,4027,3349.4219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="244" x="4027" y="3331.356">mFirstBuffer = mLastBuffer = newBuf;</text><polygon fill="#A80036" points="11480,3359.4219,11490,3363.4219,11480,3367.4219,11484,3363.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="4015" x2="11486" y1="3363.4219" y2="3363.4219"/><polygon fill="#A80036" points="390,3373.4219,380,3377.4219,390,3381.4219,386,3377.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="384" x2="11496" y1="3377.4219" y2="3377.4219"/><polygon fill="#A80036" points="11480,3402.5547,11490,3406.5547,11480,3410.5547,11484,3406.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="11486" y1="3406.5547" y2="3406.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="391" y="3401.4888">OnDataAvailable</text><polygon fill="#A80036" points="4031,3431.6875,4021,3435.6875,4031,3439.6875,4027,3435.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4025" x2="11491" y1="3435.6875" y2="3435.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="4037" y="3430.6216">OnDataAvailable</text><polygon fill="#A80036" points="11163.5,3460.8203,11173.5,3464.8203,11163.5,3468.8203,11167.5,3464.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4020" x2="11169.5" y1="3464.8203" y2="3464.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="4027" y="3459.7544">new nsHtml5Available</text><rect fill="#FEFECE" filter="url(#f2eqvspei4rxi)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="11175.5" y="3443.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="11182.5" y="3463.6826">nsHtml5Available</text><polygon fill="#A80036" points="11069,3521.25,11079,3525.25,11069,3529.25,11073,3525.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4020" x2="11075" y1="3525.25" y2="3525.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="4027" y="3505.0513">mEventTarget-&gt;Dispatch</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="4031" y="3520.1841">Dispatchの実装はnsIEventTarget.hにある</text><polygon fill="#A80036" points="11833,3550.3828,11843,3554.3828,11833,3558.3828,11837,3554.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="11091" x2="11839" y1="3554.3828" y2="3554.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="11098" y="3549.3169">Dispatch</text><polygon fill="#A80036" points="4031,3594.3828,4021,3598.3828,4031,3602.3828,4027,3598.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="4025" x2="11085" y1="3598.3828" y2="3598.3828"/><polygon fill="#A80036" points="11480,3608.3828,11490,3612.3828,11480,3616.3828,11484,3612.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="4015" x2="11486" y1="3612.3828" y2="3612.3828"/><polygon fill="#A80036" points="390,3622.3828,380,3626.3828,390,3630.3828,386,3626.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="384" x2="11496" y1="3626.3828" y2="3626.3828"/><polygon fill="#A80036" points="11258.5,3651.5156,11248.5,3655.5156,11258.5,3659.5156,11254.5,3655.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="11252.5" x2="11844" y1="3655.5156" y2="3655.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="11264.5" y="3650.4497">Run()</text><polygon fill="#A80036" points="4031,3680.6484,4021,3684.6484,4031,3688.6484,4027,3684.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4025" x2="11236.5" y1="3684.6484" y2="3684.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="4037" y="3679.5825">mStreamParser-&gt;DoDataAvailable()</text><path d="M3918,3699.6484 L4218,3699.6484 L4218,3706.6484 L4208,3716.6484 L3918,3716.6484 L3918,3699.6484 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="306.0625" style="stroke: #000000; stroke-width: 2.0;" width="8216.5" x="3918" y="3699.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="255" x="3933" y="3712.7153">streamParser::WriteStreamBytes()</text><path d="M3928,3723.7813 L4005,3723.7813 L4005,3730.7813 L3995,3740.7813 L3928,3740.7813 L3928,3723.7813 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="274.9297" style="stroke: #000000; stroke-width: 2.0;" width="8196.5" x="3928" y="3723.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="3943" y="3736.8481">loop</text><polygon fill="#A80036" points="4748,3758.0469,4758,3762.0469,4748,3766.0469,4752,3762.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4020" x2="4754" y1="3762.0469" y2="3762.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="721" x="4027" y="3756.981">auto dst = mLastBuffer-&gt;TailAsSpan(NS_HTML5_STREAM_PARSER_READ_BUFFER_SIZE); bufferへのpointerを取得</text><polygon fill="#A80036" points="4031,3772.0469,4021,3776.0469,4031,3780.0469,4027,3776.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="4025" x2="4764" y1="3776.0469" y2="3776.0469"/><polygon fill="#A80036" points="11341.5,3801.1797,11351.5,3805.1797,11341.5,3809.1797,11345.5,3805.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4020" x2="11347.5" y1="3805.1797" y2="3805.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="329" x="4027" y="3800.1138">DecodeToUTF16(src, dst, false); // pointerに書き込み</text><polygon fill="#A80036" points="4031,3815.1797,4021,3819.1797,4031,3823.1797,4027,3819.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="4025" x2="11357.5" y1="3819.1797" y2="3819.1797"/><polygon fill="#A80036" points="11998,3844.3125,12008,3848.3125,11998,3852.3125,12002,3848.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4020" x2="12004" y1="3848.3125" y2="3848.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="314" x="4027" y="3843.2466">AddContentParseData16(this, dst.data(), written)</text><polygon fill="#A80036" points="4031,3858.3125,4021,3862.3125,4031,3866.3125,4027,3862.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4025" x2="12014" y1="3862.3125" y2="3862.3125"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="4020" x2="4062" y1="3891.4453" y2="3891.4453"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="4062" x2="4062" y1="3891.4453" y2="3904.4453"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="4021" x2="4062" y1="3904.4453" y2="3904.4453"/><polygon fill="#A80036" points="4031,3900.4453,4021,3904.4453,4031,3908.4453,4027,3904.4453" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="4027" y="3886.3794">src = src.From(read)</text><polygon fill="#A80036" points="5012,3929.5781,5022,3933.5781,5012,3937.5781,5016,3933.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4020" x2="5018" y1="3933.5781" y2="3933.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="834" x="4027" y="3928.5122">RefPtr&lt;nsHtml5OwningUTF16Buffer&gt; newBuf = nsHtml5OwningUTF16Buffer::FalliblyCreate(READ_BUFFER_SIZE); //新規bufferの確保</text><polygon fill="#A80036" points="4031,3943.5781,4021,3947.5781,4031,3951.5781,4027,3947.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="4025" x2="5028" y1="3947.5781" y2="3947.5781"/><polygon fill="#A80036" points="4748,3972.7109,4758,3976.7109,4748,3980.7109,4752,3976.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4020" x2="4754" y1="3976.7109" y2="3976.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="486" x="4027" y="3971.645">mLastBuffer = (mLastBuffer-&gt;next = newBuf.forget()); //新規bufferをappend</text><polygon fill="#A80036" points="4031,3986.7109,4021,3990.7109,4031,3994.7109,4027,3990.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="4025" x2="4764" y1="3990.7109" y2="3990.7109"/><path d="M13,4019.7109 L214,4019.7109 L214,4026.7109 L204,4036.7109 L13,4036.7109 L13,4019.7109 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="4196.7734" style="stroke: #000000; stroke-width: 2.0;" width="11989" x="13" y="4019.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="156" x="28" y="4032.7778">ParseAvailableData()</text><path d="M173,4043.8438 L250,4043.8438 L250,4050.8438 L240,4060.8438 L173,4060.8438 L173,4043.8438 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="17.1328" style="stroke: #000000; stroke-width: 2.0;" width="82" x="173" y="4043.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="188" y="4056.9106">loop</text><polygon fill="#A80036" points="5200.5,4085.1094,5210.5,4089.1094,5200.5,4093.1094,5204.5,4089.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="4020" x2="5206.5" y1="4089.1094" y2="4089.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="376" x="4027" y="4084.0435">mLastWasCR = mTokenizer-&gt;tokenizeBuffer(mFirstBuffer);</text><path d="M23,4104.1094 L284,4104.1094 L284,4111.1094 L274,4121.1094 L23,4121.1094 L23,4104.1094 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="4091.375" style="stroke: #000000; stroke-width: 2.0;" width="11969" x="23" y="4104.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="216" x="38" y="4117.1763">nsHtml5Tokenizer::stateLoop</text><rect fill="#EEEEEE" filter="url(#f2eqvspei4rxi)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="12141.5" x="3" y="4141.8086"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="12144.5" y1="4141.8086" y2="4141.8086"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="12144.5" y1="4144.8086" y2="4144.8086"/><rect fill="#EEEEEE" filter="url(#f2eqvspei4rxi)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="89" x="6029.25" y="4131.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="6035.25" y="4147.3091">stateloop</text><path d="M33,4171.375 L110,4171.375 L110,4178.375 L100,4188.375 L33,4188.375 L33,4171.375 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="3973.9766" style="stroke: #000000; stroke-width: 2.0;" width="11949" x="33" y="4171.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="48" y="4184.4419">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="125" y="4183.5854">[for(;;)]</text><path d="M43,4195.5078 L107,4195.5078 L107,4202.5078 L97,4212.5078 L43,4212.5078 L43,4195.5078 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="3942.8438" style="stroke: #000000; stroke-width: 2.0;" width="11929" x="43" y="4195.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="58" y="4208.5747">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="122" y="4207.7183">[switch(state) == DATA]</text><path d="M5125.5,4219.6406 L5202.5,4219.6406 L5202.5,4226.6406 L5192.5,4236.6406 L5125.5,4236.6406 L5125.5,4219.6406 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="260.9297" style="stroke: #000000; stroke-width: 2.0;" width="824" x="5125.5" y="4219.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="5140.5" y="4232.7075">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="5217.5" y="4231.8511">[for(;;)]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="4257.9063" y2="4257.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="4257.9063" y2="4270.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="4270.9063" y2="4270.9063"/><polygon fill="#A80036" points="5233.5,4266.9063,5223.5,4270.9063,5233.5,4274.9063,5229.5,4270.9063" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="5229.5" y="4252.8403">++pos == endPos; // 1文字進める</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="4300.0391" y2="4300.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="4300.0391" y2="4313.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="4313.0391" y2="4313.0391"/><polygon fill="#A80036" points="5233.5,4309.0391,5223.5,4313.0391,5233.5,4317.0391,5229.5,4313.0391" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="299" x="5229.5" y="4294.9731">c = checkChar(buf, pos); // 1文字バッファに読む</text><path d="M5135.5,4328.0391 L5199.5,4328.0391 L5199.5,4335.0391 L5189.5,4345.0391 L5135.5,4345.0391 L5135.5,4328.0391 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="145.5313" style="stroke: #000000; stroke-width: 2.0;" width="804" x="5135.5" y="4328.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="5150.5" y="4341.106">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="174" x="5214.5" y="4340.2495">[switch(c) == '&lt;' // c == '&lt;']</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="4366.3047" y2="4366.3047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="4366.3047" y2="4379.3047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="4379.3047" y2="4379.3047"/><polygon fill="#A80036" points="5233.5,4375.3047,5223.5,4379.3047,5233.5,4383.3047,5229.5,4379.3047" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="244" x="5229.5" y="4361.2388">flushChars(buf, pos); // バッファをclear</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="4408.4375" y2="4408.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="4408.4375" y2="4421.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="4421.4375" y2="4421.4375"/><polygon fill="#A80036" points="5233.5,4417.4375,5223.5,4421.4375,5233.5,4425.4375,5229.5,4421.4375" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="698" x="5229.5" y="4403.3716">state = P::transition(mViewSource, nsHtml5Tokenizer::TAG_OPEN, reconsume, pos); stateをTAG_OPENにする</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="4450.5703" y2="4450.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="4450.5703" y2="4463.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="4463.5703" y2="4463.5703"/><polygon fill="#A80036" points="5233.5,4459.5703,5223.5,4463.5703,5233.5,4467.5703,5229.5,4463.5703" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="324" x="5229.5" y="4445.5044">NS_HTML5_BREAK(dataloop); // goto dataloop_end</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="5135.5" x2="5939.5" y1="4472.5703" y2="4472.5703"/><rect fill="#EEEEEE" filter="url(#f2eqvspei4rxi)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="12141.5" x="3" y="4508.1367"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="12144.5" y1="4508.1367" y2="4508.1367"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="12144.5" y1="4511.1367" y2="4511.1367"/><rect fill="#EEEEEE" filter="url(#f2eqvspei4rxi)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="120" x="6013.75" y="4497.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="6019.75" y="4513.6372">dataloop_end</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="43" x2="11972" y1="4531.7031" y2="4531.7031"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="187" x="48" y="4541.9136">[switch(state) == TAG_OPEN]</text><path d="M5125.5,4552.5078 L5202.5,4552.5078 L5202.5,4559.5078 L5192.5,4569.5078 L5125.5,4569.5078 L5125.5,4552.5078 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="387.3281" style="stroke: #000000; stroke-width: 2.0;" width="840" x="5125.5" y="4552.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="5140.5" y="4565.5747">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="5217.5" y="4564.7183">[for(;;)]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="4590.7734" y2="4590.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="4590.7734" y2="4603.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="4603.7734" y2="4603.7734"/><polygon fill="#A80036" points="5233.5,4599.7734,5223.5,4603.7734,5233.5,4607.7734,5229.5,4603.7734" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="5229.5" y="4585.7075">++pos == endPos; // 1文字進める</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="4632.9063" y2="4632.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="4632.9063" y2="4645.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="4645.9063" y2="4645.9063"/><polygon fill="#A80036" points="5233.5,4641.9063,5223.5,4645.9063,5233.5,4649.9063,5229.5,4645.9063" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="299" x="5229.5" y="4627.8403">c = checkChar(buf, pos); // 1文字バッファに読む</text><path d="M5135.5,4660.9063 L5199.5,4660.9063 L5199.5,4667.9063 L5189.5,4677.9063 L5135.5,4677.9063 L5135.5,4660.9063 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="271.9297" style="stroke: #000000; stroke-width: 2.0;" width="820" x="5135.5" y="4660.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="5150.5" y="4673.9731">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="217" x="5214.5" y="4673.1167">[if (c &gt;= 'a' &amp;&amp; c &lt;= 'z') // c == 'h']</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="4699.1719" y2="4699.1719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="4699.1719" y2="4712.1719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="4712.1719" y2="4712.1719"/><polygon fill="#A80036" points="5233.5,4708.1719,5223.5,4712.1719,5233.5,4716.1719,5229.5,4712.1719" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="5229.5" y="4694.106">endTag = false;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="4741.3047" y2="4741.3047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="4741.3047" y2="4754.3047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="4754.3047" y2="4754.3047"/><polygon fill="#A80036" points="5233.5,4750.3047,5223.5,4754.3047,5233.5,4758.3047,5229.5,4754.3047" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="5229.5" y="4736.2388">clearStrBufBeforeUse(); //strBufLen = 0</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="4783.4375" y2="4783.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="4783.4375" y2="4796.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="4796.4375" y2="4796.4375"/><polygon fill="#A80036" points="5233.5,4792.4375,5223.5,4796.4375,5233.5,4800.4375,5229.5,4796.4375" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="282" x="5229.5" y="4778.3716">appendStrBuf(c); // strBuf[strBufLen++] = c</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="4825.5703" y2="4825.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="4825.5703" y2="4838.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="4838.5703" y2="4838.5703"/><polygon fill="#A80036" points="5233.5,4834.5703,5223.5,4838.5703,5233.5,4842.5703,5229.5,4838.5703" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="5229.5" y="4820.5044">containsHyphen = false;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="4867.7031" y2="4867.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="4867.7031" y2="4880.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="4880.7031" y2="4880.7031"/><polygon fill="#A80036" points="5233.5,4876.7031,5223.5,4880.7031,5233.5,4884.7031,5229.5,4880.7031" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="714" x="5229.5" y="4862.6372">state = P::transition(mViewSource, nsHtml5Tokenizer::TAG_NAME, reconsume, pos); // stateをTAG_NAMEにする</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="4909.8359" y2="4909.8359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="4909.8359" y2="4922.8359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="4922.8359" y2="4922.8359"/><polygon fill="#A80036" points="5233.5,4918.8359,5223.5,4922.8359,5233.5,4926.8359,5229.5,4922.8359" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="372" x="5229.5" y="4904.77">NS_HTML5_BREAK(tagopenloop); // goto tagopenloop_end</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="5135.5" x2="5955.5" y1="4931.8359" y2="4931.8359"/><rect fill="#EEEEEE" filter="url(#f2eqvspei4rxi)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="12141.5" x="3" y="4967.4023"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="12144.5" y1="4967.4023" y2="4967.4023"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="12144.5" y1="4970.4023" y2="4970.4023"/><rect fill="#EEEEEE" filter="url(#f2eqvspei4rxi)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="148" x="5999.75" y="4956.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="129" x="6005.75" y="4972.9028">tagopenloop_end</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="43" x2="11972" y1="4990.9688" y2="4990.9688"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="188" x="48" y="5001.1792">[switch(state) == TAG_NAME]</text><path d="M53,5011.7734 L130,5011.7734 L130,5018.7734 L120,5028.7734 L53,5028.7734 L53,5011.7734 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="3119.5781" style="stroke: #000000; stroke-width: 2.0;" width="11909" x="53" y="5011.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="68" y="5024.8403">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="145" y="5023.9839">[for(;;)]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="5050.0391" y2="5050.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="5050.0391" y2="5063.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="5063.0391" y2="5063.0391"/><polygon fill="#A80036" points="5233.5,5059.0391,5223.5,5063.0391,5233.5,5067.0391,5229.5,5063.0391" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="5229.5" y="5044.9731">++pos == endPos; // 1文字進める</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="5092.1719" y2="5092.1719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="5092.1719" y2="5105.1719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="5105.1719" y2="5105.1719"/><polygon fill="#A80036" points="5233.5,5101.1719,5223.5,5105.1719,5233.5,5109.1719,5229.5,5105.1719" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="299" x="5229.5" y="5087.106">c = checkChar(buf, pos); // 1文字バッファに読む</text><path d="M63,5120.1719 L127,5120.1719 L127,5127.1719 L117,5137.1719 L63,5137.1719 L63,5120.1719 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="3004.1797" style="stroke: #000000; stroke-width: 2.0;" width="11889" x="63" y="5120.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="78" y="5133.2388">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="178" x="142" y="5132.3823">[switch (c) == '&gt;' // c == '&gt;']</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="5158.4375" y2="5158.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="5158.4375" y2="5171.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="5171.4375" y2="5171.4375"/><polygon fill="#A80036" points="5233.5,5167.4375,5223.5,5171.4375,5233.5,5175.4375,5229.5,5171.4375" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="788" x="5229.5" y="5153.3716">strBufToElementNameString(); // nsHtml5ElementName* tagNameにstrBufferから生成して入れてる。strBufLenは0にされる。</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="5200.5703" y2="5200.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="5200.5703" y2="5213.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="5213.5703" y2="5213.5703"/><polygon fill="#A80036" points="5233.5,5209.5703,5223.5,5213.5703,5233.5,5217.5703,5229.5,5213.5703" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="816" x="5229.5" y="5195.5044">state = P::transition(mViewSource, emitCurrentTagToken(false, pos), reconsume, pos); // stateをnsHtml5Tokenizer::DATAにする</text><path d="M73,5228.5703 L641,5228.5703 L641,5235.5703 L631,5245.5703 L73,5245.5703 L73,5228.5703 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="2747.5781" style="stroke: #000000; stroke-width: 2.0;" width="11869" x="73" y="5228.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="523" x="88" y="5241.6372">nsHtml5Tokenizer::emitCurrentTagToken(bool selfClosing, int32_t pos)</text><polygon fill="#A80036" points="6045.5,5282.9688,6055.5,5286.9688,6045.5,5290.9688,6049.5,5286.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="6051.5" y1="5286.9688" y2="5286.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="241" x="5229.5" y="5281.9028">startTag(tagName, attrs, selfClosing);</text><path d="M5019,5250.7031 L5019,5305.7031 L5203,5305.7031 L5203,5260.7031 L5193,5250.7031 L5019,5250.7031 " fill="#FBFB77" filter="url(#f2eqvspei4rxi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M5193,5250.7031 L5193,5260.7031 L5203,5260.7031 L5193,5250.7031 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="5025" y="5267.77">tagName: 'html'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="5025" y="5282.9028">attrs: EMPTY_ATTRIBUTES</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="5025" y="5298.0356">selfClosing: false</text><path d="M83,5322.1016 L1029,5322.1016 L1029,5329.1016 L1019,5339.1016 L83,5339.1016 L83,5322.1016 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="2647.0469" style="stroke: #000000; stroke-width: 2.0;" width="11849" x="83" y="5322.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="901" x="98" y="5335.1685">nsHtml5TreeBuilder::startTag(nsHtml5ElementName* elementName, nsHtml5HtmlAttributes* attributes, bool selfClosing)</text><path d="M93,5346.2344 L170,5346.2344 L170,5353.2344 L160,5363.2344 L93,5363.2344 L93,5346.2344 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="2572.7813" style="stroke: #000000; stroke-width: 2.0;" width="11829" x="93" y="5346.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="108" y="5359.3013">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="185" y="5358.4448">[for(;;)]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="6057.5" x2="6099.5" y1="5384.5" y2="5384.5"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6099.5" x2="6099.5" y1="5384.5" y2="5397.5"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6058.5" x2="6099.5" y1="5397.5" y2="5397.5"/><polygon fill="#A80036" points="6068.5,5393.5,6058.5,5397.5,6068.5,5401.5,6064.5,5397.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="6064.5" y="5379.4341">int32_t group = elementName-&gt;getGroup();</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="6057.5" x2="6099.5" y1="5426.6328" y2="5426.6328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6099.5" x2="6099.5" y1="5426.6328" y2="5439.6328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6058.5" x2="6099.5" y1="5439.6328" y2="5439.6328"/><polygon fill="#A80036" points="6068.5,5435.6328,6058.5,5439.6328,6068.5,5443.6328,6064.5,5439.6328" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="299" x="6064.5" y="5421.5669">nsAtom* name = elementName-&gt;getName();</text><path d="M103,5454.6328 L167,5454.6328 L167,5461.6328 L157,5471.6328 L103,5471.6328 L103,5454.6328 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="2457.3828" style="stroke: #000000; stroke-width: 2.0;" width="11809" x="103" y="5454.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="118" y="5467.6997">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="171" x="182" y="5466.8433">[switch (mode) == INITIAL]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="6057.5" x2="6099.5" y1="5492.8984" y2="5492.8984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6099.5" x2="6099.5" y1="5492.8984" y2="5505.8984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6058.5" x2="6099.5" y1="5505.8984" y2="5505.8984"/><polygon fill="#A80036" points="6068.5,5501.8984,6058.5,5505.8984,6068.5,5509.8984,6064.5,5505.8984" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="6064.5" y="5487.8325">errStartTagWithoutDoctype();</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="6057.5" x2="6099.5" y1="5535.0313" y2="5535.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6099.5" x2="6099.5" y1="5535.0313" y2="5548.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6058.5" x2="6099.5" y1="5548.0313" y2="5548.0313"/><polygon fill="#A80036" points="6068.5,5544.0313,6058.5,5548.0313,6068.5,5552.0313,6064.5,5548.0313" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="390" x="6064.5" y="5529.9653">documentModeInternal(QUIRKS_MODE, nullptr, nullptr, false);</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="6057.5" x2="6099.5" y1="5577.1641" y2="5577.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6099.5" x2="6099.5" y1="5577.1641" y2="5590.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6058.5" x2="6099.5" y1="5590.1641" y2="5590.1641"/><polygon fill="#A80036" points="6068.5,5586.1641,6058.5,5590.1641,6068.5,5594.1641,6064.5,5590.1641" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="6064.5" y="5572.0981">mode = BEFORE_HTML;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="6057.5" x2="6099.5" y1="5619.2969" y2="5619.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6099.5" x2="6099.5" y1="5619.2969" y2="5632.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6058.5" x2="6099.5" y1="5632.2969" y2="5632.2969"/><polygon fill="#A80036" points="6068.5,5628.2969,6058.5,5632.2969,6068.5,5636.2969,6064.5,5632.2969" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="6064.5" y="5614.231">continue;</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="103" x2="11912" y1="5641.2969" y2="5641.2969"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="108" y="5651.5073">[case BEFORE_HTML]</text><path d="M113,5662.1016 L177,5662.1016 L177,5669.1016 L167,5679.1016 L113,5679.1016 L113,5662.1016 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="873.125" style="stroke: #000000; stroke-width: 2.0;" width="7707" x="113" y="5662.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="128" y="5675.1685">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="202" x="192" y="5674.312">[switch (group)  == case HTML]</text><path d="M123,5686.2344 L187,5686.2344 L187,5693.2344 L177,5703.2344 L123,5703.2344 L123,5686.2344 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="700.7891" style="stroke: #000000; stroke-width: 2.0;" width="7687" x="123" y="5686.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="138" y="5699.3013">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="391" x="202" y="5698.4448">[if attributes == nsHtml5HtmlAttributes::EMPTY_ATTRIBUTES]</text><path d="M133,5710.3672 L504,5710.3672 L504,5717.3672 L494,5727.3672 L133,5727.3672 L133,5710.3672 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="625.5234" style="stroke: #000000; stroke-width: 2.0;" width="7667" x="133" y="5710.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="326" x="148" y="5723.4341">appendHtmlElementToDocumentAndPush();</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="6057.5" x2="6099.5" y1="5748.6328" y2="5748.6328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6099.5" x2="6099.5" y1="5748.6328" y2="5761.6328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6058.5" x2="6099.5" y1="5761.6328" y2="5761.6328"/><polygon fill="#A80036" points="6068.5,5757.6328,6058.5,5761.6328,6068.5,5765.6328,6064.5,5761.6328" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="473" x="6064.5" y="5743.5669">appendHtmlElementToDocumentAndPush(tokenizer-&gt;emptyAttributes());</text><path d="M143,5776.6328 L764,5776.6328 L764,5783.6328 L754,5793.6328 L143,5793.6328 L143,5776.6328 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="552.2578" style="stroke: #000000; stroke-width: 2.0;" width="7647" x="143" y="5776.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="576" x="158" y="5789.6997">appendHtmlElementToDocumentAndPush(nsHtml5HtmlAttributes* attributes)</text><polygon fill="#A80036" points="6612.5,5810.8984,6622.5,5814.8984,6612.5,5818.8984,6616.5,5814.8984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6057.5" x2="6618.5" y1="5814.8984" y2="5814.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="428" x="6064.5" y="5809.8325">nsIContentHandle* elt = createHtmlElementSetAsRoot(attributes);</text><path d="M153,5829.8984 L714,5829.8984 L714,5836.8984 L704,5846.8984 L153,5846.8984 L153,5829.8984 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="378.5938" style="stroke: #000000; stroke-width: 2.0;" width="7627" x="153" y="5829.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="516" x="168" y="5842.9653">nsIContentHandle* nsHtml5TreeBuilder::createHtmlElementSetAsRoot</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="6624.5" x2="6666.5" y1="5868.1641" y2="5868.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6666.5" x2="6666.5" y1="5868.1641" y2="5881.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6625.5" x2="6666.5" y1="5881.1641" y2="5881.1641"/><polygon fill="#A80036" points="6635.5,5877.1641,6625.5,5881.1641,6635.5,5885.1641,6631.5,5881.1641" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="261" x="6631.5" y="5863.0981">nsHtml5ContentCreatorFunction creator;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="6624.5" x2="6666.5" y1="5910.2969" y2="5910.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6666.5" x2="6666.5" y1="5910.2969" y2="5923.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6625.5" x2="6666.5" y1="5923.2969" y2="5923.2969"/><polygon fill="#A80036" points="6635.5,5919.2969,6625.5,5923.2969,6635.5,5927.2969,6631.5,5923.2969" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="289" x="6631.5" y="5905.231">creator.html = NS_NewHTMLSharedElement;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="6624.5" x2="6666.5" y1="5952.4297" y2="5952.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6666.5" x2="6666.5" y1="5952.4297" y2="5965.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6625.5" x2="6666.5" y1="5965.4297" y2="5965.4297"/><polygon fill="#A80036" points="6635.5,5961.4297,6625.5,5965.4297,6635.5,5969.4297,6631.5,5965.4297" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="750" x="6631.5" y="5947.3638">nsIContentHandle* content = createElement(kNameSpaceID_XHTML, nsGkAtoms::html, aAttributes, nullptr, creator);</text><path d="M163,5980.4297 L1476,5980.4297 L1476,5987.4297 L1466,5997.4297 L163,5997.4297 L163,5980.4297 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="146.7969" style="stroke: #000000; stroke-width: 2.0;" width="7607" x="163" y="5980.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="1268" x="178" y="5993.4966">createElement(int32_t aNamespace, nsAtom* aName, nsHtml5HtmlAttributes* aAttributes, nsIContentHandle* aIntendedParent, nsHtml5ContentCreatorFunction aCreator)</text><polygon fill="#A80036" points="7660.5,6034.8281,7670.5,6038.8281,7660.5,6042.8281,7664.5,6038.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6624.5" x2="7666.5" y1="6038.8281" y2="6038.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="1024" x="6631.5" y="6033.7622">elem = nsHtml5TreeOperation::CreateHTMLElement(aName, aAttributes, mozilla::dom::FROM_PARSER_FRAGMENT, nodeInfoManager, mBuilder, aCreator.html);</text><path d="M6015,6002.5625 L6015,6057.5625 L6615,6057.5625 L6615,6012.5625 L6605,6002.5625 L6015,6002.5625 " fill="#FBFB77" filter="url(#f2eqvspei4rxi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M6605,6002.5625 L6605,6012.5625 L6615,6012.5625 L6605,6002.5625 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="579" x="6021" y="6019.6294">aAttributesはappendHtmlElementToDocumentAndPushに渡されたempty_attributes(nullptr)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="343" x="6021" y="6034.7622">nodeInfoManagerはmBuilder-&gt;GetNodeInfoManager()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="6021" y="6049.895">mBuilder : nsHtml5OplessBuilder</text><path d="M173,6073.9609 L2234,6073.9609 L2234,6080.9609 L2224,6090.9609 L173,6090.9609 L173,6073.9609 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="17.1328" style="stroke: #000000; stroke-width: 2.0;" width="2066" x="173" y="6073.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="2016" x="188" y="6087.0278">nsHtml5TreeOperation::CreateHTMLElement(nsAtom* aName, nsHtml5HtmlAttributes* aAttributes, mozilla::dom::FromParser aFromParser, nsNodeInfoManager* aNodeInfoManager, nsHtml5DocumentBuilder* aBuilder, mozilla::dom::HTMLContentCreatorFunction aCreator)</text><polygon fill="#A80036" points="6635.5,6115.2266,6625.5,6119.2266,6635.5,6123.2266,6631.5,6119.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="6629.5" x2="7671.5" y1="6119.2266" y2="6119.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="6641.5" y="6114.1606">return elem;</text><polygon fill="#A80036" points="7660.5,6151.3594,7670.5,6155.3594,7660.5,6159.3594,7664.5,6155.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6624.5" x2="7666.5" y1="6155.3594" y2="6155.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="675" x="6631.5" y="6150.2935">nsresult rv = nsHtml5TreeOperation::AppendToDocument(static_cast&lt;nsIContent*&gt;(content), mBuilder);</text><path d="M173,6170.3594 L966,6170.3594 L966,6177.3594 L956,6187.3594 L173,6187.3594 L173,6170.3594 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="17.1328" style="stroke: #000000; stroke-width: 2.0;" width="798" x="173" y="6170.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="748" x="188" y="6183.4263">nsHtml5TreeOperation::AppendToDocument(nsIContent* aNode, nsHtml5DocumentBuilder* aBuilder)</text><polygon fill="#A80036" points="6635.5,6196.4922,6625.5,6200.4922,6635.5,6204.4922,6631.5,6200.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="6629.5" x2="7671.5" y1="6200.4922" y2="6200.4922"/><polygon fill="#A80036" points="6068.5,6232.625,6058.5,6236.625,6068.5,6240.625,6064.5,6236.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="6062.5" x2="6623.5" y1="6236.625" y2="6236.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="249" x="6074.5" y="6231.5591">return content; : nsIContentHandle* elt</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="6057.5" x2="6099.5" y1="6265.7578" y2="6265.7578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6099.5" x2="6099.5" y1="6265.7578" y2="6278.7578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6058.5" x2="6099.5" y1="6278.7578" y2="6278.7578"/><polygon fill="#A80036" points="6068.5,6274.7578,6058.5,6278.7578,6068.5,6282.7578,6064.5,6278.7578" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="553" x="6064.5" y="6260.6919">nsHtml5StackNode* node = createStackNode(nsHtml5ElementName::ELT_HTML, elt);</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="6057.5" x2="6099.5" y1="6307.8906" y2="6307.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6099.5" x2="6099.5" y1="6307.8906" y2="6320.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6058.5" x2="6099.5" y1="6320.8906" y2="6320.8906"/><polygon fill="#A80036" points="6068.5,6316.8906,6058.5,6320.8906,6068.5,6324.8906,6064.5,6320.8906" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="6064.5" y="6302.8247">push(node);</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="123" x2="7810" y1="6343.8906" y2="6343.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6057.5" x2="6099.5" y1="6366.0234" y2="6366.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6099.5" x2="6099.5" y1="6366.0234" y2="6379.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6058.5" x2="6099.5" y1="6379.0234" y2="6379.0234"/><polygon fill="#A80036" points="6068.5,6375.0234,6058.5,6379.0234,6068.5,6383.0234,6064.5,6379.0234" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="346" x="6064.5" y="6360.9575">appendHtmlElementToDocumentAndPush(attributes);</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="6057.5" x2="6099.5" y1="6415.1563" y2="6415.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6099.5" x2="6099.5" y1="6415.1563" y2="6428.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6058.5" x2="6099.5" y1="6428.1563" y2="6428.1563"/><polygon fill="#A80036" points="6068.5,6424.1563,6058.5,6428.1563,6068.5,6432.1563,6064.5,6428.1563" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="6064.5" y="6410.0903">mode = BEFORE_HEAD;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="6057.5" x2="6099.5" y1="6457.2891" y2="6457.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6099.5" x2="6099.5" y1="6457.2891" y2="6470.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6058.5" x2="6099.5" y1="6470.2891" y2="6470.2891"/><polygon fill="#A80036" points="6068.5,6466.2891,6058.5,6470.2891,6068.5,6474.2891,6064.5,6470.2891" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="6064.5" y="6452.2231">attributes = nullptr;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="6057.5" x2="6099.5" y1="6499.4219" y2="6499.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6099.5" x2="6099.5" y1="6499.4219" y2="6512.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6058.5" x2="6099.5" y1="6512.4219" y2="6512.4219"/><polygon fill="#A80036" points="6068.5,6508.4219,6058.5,6512.4219,6068.5,6516.4219,6064.5,6512.4219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="363" x="6064.5" y="6494.356">NS_HTML5_BREAK(starttagloop); // goto startagloop_end</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="113" x2="7820" y1="6521.4219" y2="6521.4219"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="56" x="118" y="6531.6323">[default]</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="103" x2="11912" y1="6543.2266" y2="6543.2266"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="108" y="6553.437">[case IN_BODY]</text><path d="M198,6564.0313 L262,6564.0313 L262,6571.0313 L252,6581.0313 L198,6581.0313 L198,6564.0313 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1340.9844" style="stroke: #000000; stroke-width: 2.0;" width="11704" x="198" y="6564.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="213" y="6577.0981">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="202" x="277" y="6576.2417">[switch (group)  == case HTML]</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="198" x2="11902" y1="6582.1641" y2="6582.1641"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="331" x="203" y="6592.3745">[case DIV_OR_BLOCKQUOTE_OR_CENTER_OR_MENU]</text><path d="M208,6602.9688 L821,6602.9688 L821,6609.9688 L811,6619.9688 L208,6619.9688 L208,6602.9688 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1295.0469" style="stroke: #000000; stroke-width: 2.0;" width="11684" x="208" y="6602.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="568" x="223" y="6616.0356">appendToCurrentNodeAndPushElementMayFoster(elementName, attributes)</text><path d="M218,6627.1016 L806,6627.1016 L806,6634.1016 L796,6644.1016 L218,6644.1016 L218,6627.1016 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1263.9141" style="stroke: #000000; stroke-width: 2.0;" width="11664" x="218" y="6627.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="543" x="233" y="6640.1685">nsHtml5TreeBuilder::appendElement(aChild: elt, aParent: current-&gt;node)</text><polygon fill="#A80036" points="7376.5,6661.3672,7386.5,6665.3672,7376.5,6669.3672,7380.5,6665.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6057.5" x2="7382.5" y1="6665.3672" y2="6665.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="6064.5" y="6660.3013">current-&gt;node</text><polygon fill="#A80036" points="7504,6690.5,7514,6694.5,7504,6698.5,7508,6694.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="7388.5" x2="7510" y1="6694.5" y2="6694.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="7395.5" y="6689.4341">current-&gt;node</text><polygon fill="#A80036" points="7660.5,6704.5,7670.5,6708.5,7660.5,6712.5,7664.5,6708.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6057.5" x2="7666.5" y1="6708.5" y2="6708.5"/><path d="M228,6723.5 L1088,6723.5 L1088,6730.5 L1078,6740.5 L228,6740.5 L228,6723.5 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1146.5156" style="stroke: #000000; stroke-width: 2.0;" width="11563" x="228" y="6723.5"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="815" x="243" y="6736.5669">nsHtml5TreeOperation::Append(nsIContent* aNode, nsIContent* aParent, nsHtml5DocumentBuilder* aBuilder)</text><path d="M11796,6728.5 L11796,6753.5 L11863,6753.5 L11863,6738.5 L11853,6728.5 L11796,6728.5 " fill="#FBFB77" filter="url(#f2eqvspei4rxi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M11853,6728.5 L11853,6738.5 L11863,6738.5 L11853,6728.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="11802" y="6745.5669">//frame</text><polygon fill="#A80036" points="7660.5,6757.7656,7670.5,6761.7656,7660.5,6765.7656,7664.5,6761.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="278.5" x2="7666.5" y1="6761.7656" y2="6761.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="538" x="285.5" y="6756.6997">nsHtml5OtherDocUpdate update(aParent-&gt;OwnerDoc(), aBuilder-&gt;GetDocument())</text><polygon fill="#A80036" points="7504,6786.8984,7514,6790.8984,7504,6794.8984,7508,6790.8984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6057.5" x2="7510" y1="6790.8984" y2="6790.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="6064.5" y="6785.8325">aParent-&gt;AppendChildTo(aNode, false)</text><polygon fill="#A80036" points="7504,6816.0313,7514,6820.0313,7504,6824.0313,7508,6820.0313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6057.5" x2="7510" y1="6820.0313" y2="6820.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="482" x="6064.5" y="6814.9653">aNode-&gt;SetParserHasNotified(); aNodeはcurrentNodeから作ったnsIContent</text><polygon fill="#A80036" points="8017,6845.1641,8027,6849.1641,8017,6853.1641,8021,6849.1641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="7672.5" x2="8023" y1="6849.1641" y2="6849.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="311" x="7679.5" y="6844.0981">nsNodeUtils::ContentAppended(aParent, aNode)</text><path d="M925.5,6864.1641 L1619.5,6864.1641 L1619.5,6871.1641 L1609.5,6881.1641 L925.5,6881.1641 L925.5,6864.1641 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="998.8516" style="stroke: #000000; stroke-width: 2.0;" width="10855.5" x="925.5" y="6864.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="649" x="940.5" y="6877.231">nsNodeUtils::ContentAppended(nsIContent* aContainer, nsIContent* aFirstNewContent)</text><polygon fill="#A80036" points="7527,6898.4297,7517,6902.4297,7527,6906.4297,7523,6902.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="7521" x2="8028" y1="6902.4297" y2="6902.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="477" x="7533" y="6897.3638">Document* doc = aContainer-&gt;OwnerDoc(); // rootのhtml documentを取得</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="7516" x2="7558" y1="6931.5625" y2="6931.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="7558" x2="7558" y1="6931.5625" y2="6944.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="7517" x2="7558" y1="6944.5625" y2="6944.5625"/><polygon fill="#A80036" points="7527,6940.5625,7517,6944.5625,7527,6948.5625,7523,6944.5625" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="7523" y="6926.4966">doc-&gt;Changed();</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="8029" x2="8071" y1="6973.6953" y2="6973.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="8071" x2="8071" y1="6973.6953" y2="6986.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="8030" x2="8071" y1="6986.6953" y2="6986.6953"/><polygon fill="#A80036" points="8040,6982.6953,8030,6986.6953,8040,6990.6953,8036,6986.6953" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="705" x="8036" y="6968.6294">IMPL_MUTATION_NOTIFICATION(ContentAppended, aContainer, (aFirstNewContent), IsRemoveNotification::No);</text><path d="M935.5,7001.6953 L1474.5,7001.6953 L1474.5,7008.6953 L1464.5,7018.6953 L935.5,7018.6953 L935.5,7001.6953 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="854.3203" style="stroke: #000000; stroke-width: 2.0;" width="10835.5" x="935.5" y="7001.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="494" x="950.5" y="7014.7622">IMPL_MUTATION_NOTIFICATION(func_, content_, params_, remove_)</text><polygon fill="#A80036" points="1109.5,7035.9609,1099.5,7039.9609,1109.5,7043.9609,1105.5,7039.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1103.5" x2="8028" y1="7039.9609" y2="7039.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="303" x="1115.5" y="7034.895">nsIPresShell* shell = doc-&gt;GetObservingShell()</text><polygon fill="#A80036" points="8736,7065.0938,8746,7069.0938,8736,7073.0938,8740,7069.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="8029" x2="8742" y1="7069.0938" y2="7069.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="8036" y="7064.0278">shell-&gt;func_ params_;</text><path d="M945.5,7084.0938 L1438.5,7084.0938 L1438.5,7091.0938 L1428.5,7101.0938 L945.5,7101.0938 L945.5,7084.0938 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="764.9219" style="stroke: #000000; stroke-width: 2.0;" width="10445.5" x="945.5" y="7084.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="448" x="960.5" y="7097.1606">PresShell::ContentAppended(nsIContent* aFirstNewContent)</text><path d="M11396,7089.0938 L11396,7114.0938 L11752,7114.0938 L11752,7099.0938 L11742,7089.0938 L11396,7089.0938 " fill="#FBFB77" filter="url(#f2eqvspei4rxi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M11742,7089.0938 L11742,7099.0938 L11752,7099.0938 L11742,7089.0938 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="335" x="11402" y="7106.1606">aFirstNewContent: currentNodeから作ったnsIContent</text><polygon fill="#A80036" points="9450,7118.3594,9460,7122.3594,9450,7126.3594,9454,7122.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="8748" x2="9456" y1="7122.3594" y2="7122.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="690" x="8755" y="7117.2935">mFrameConstructor-&gt;ContentAppended(aFirstNewContent, nsCSSFrameConstructor::InsertionKind::Async);</text><path d="M955.5,7137.3594 L1776.5,7137.3594 L1776.5,7144.3594 L1766.5,7154.3594 L955.5,7154.3594 L955.5,7137.3594 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="704.6563" style="stroke: #000000; stroke-width: 2.0;" width="10425.5" x="955.5" y="7137.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="776" x="970.5" y="7150.4263">nsCSSFrameConstructor::ContentAppended(nsIContent* aFirstNewContent, InsertionKind aInsertionKind)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="9462" x2="9504" y1="7175.625" y2="7175.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="9504" x2="9504" y1="7175.625" y2="7188.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="9463" x2="9504" y1="7188.625" y2="7188.625"/><polygon fill="#A80036" points="9473,7184.625,9463,7188.625,9473,7192.625,9469,7188.625" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="588" x="9469" y="7170.5591">InsertionPoint insertion = GetRangeInsertionPoint(aFirstNewContent, nullptr, aInsertionKind);</text><polygon fill="#A80036" points="10052,7213.7578,10062,7217.7578,10052,7221.7578,10056,7217.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="9462" x2="10058" y1="7217.7578" y2="7217.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="401" x="9469" y="7212.6919">nsContainerFrame*&amp; parentFrame = insertion.mParentFrame;</text><path d="M8683,7232.7578 L8747,7232.7578 L8747,7239.7578 L8737,7249.7578 L8683,7249.7578 L8683,7232.7578 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="119.5313" style="stroke: #000000; stroke-width: 2.0;" width="1651" x="8683" y="7232.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="8698" y="7245.8247">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="120" x="8762" y="7244.9683">[if (!parentFrame)]</text><path d="M9358,7256.8906 L9422,7256.8906 L9422,7263.8906 L9412,7273.8906 L9358,7273.8906 L9358,7256.8906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="59.2656" style="stroke: #000000; stroke-width: 2.0;" width="463" x="9358" y="7256.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="9373" y="7269.9575">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="284" x="9437" y="7269.1011">[if (aInsertionKind == InsertionKind::Async)]</text><path d="M9826,7261.8906 L9826,7346.8906 L10315,7346.8906 L10315,7271.8906 L10305,7261.8906 L9826,7261.8906 " fill="#FBFB77" filter="url(#f2eqvspei4rxi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M10305,7261.8906 L10305,7271.8906 L10315,7271.8906 L10305,7261.8906 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="468" x="9832" y="7278.9575">We're punting on frame construction because there's no container frame.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="436" x="9832" y="7294.0903">The Servo-backed style system handles this case like the lazy frame</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="440" x="9832" y="7309.2231">construction case, except when we're already constructing frames, in</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="318" x="9832" y="7324.356">which case we shouldn't need to do anything else.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="9836" y="7339.4888"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="9462" x2="9504" y1="7295.1563" y2="7295.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="9504" x2="9504" y1="7295.1563" y2="7308.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="9463" x2="9504" y1="7308.1563" y2="7308.1563"/><polygon fill="#A80036" points="9473,7304.1563,9463,7308.1563,9473,7312.1563,9469,7308.1563" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="340" x="9469" y="7290.0903">LazilyStyleNewChildRange(aFirstNewContent, nullptr);</text><polygon fill="#A80036" points="8759,7340.2891,8749,7344.2891,8759,7348.2891,8755,7344.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="8753" x2="9461" y1="7344.2891" y2="7344.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="8765" y="7339.2231">return;</text><path d="M965.5,7366.2891 L1029.5,7366.2891 L1029.5,7373.2891 L1019.5,7383.2891 L965.5,7383.2891 L965.5,7366.2891 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="468.7266" style="stroke: #000000; stroke-width: 2.0;" width="10405.5" x="965.5" y="7366.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="980.5" y="7379.356">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="284" x="1044.5" y="7378.4995">[if (aInsertionKind == InsertionKind::Async)]</text><path d="M975.5,7390.4219 L1039.5,7390.4219 L1039.5,7397.4219 L1029.5,7407.4219 L975.5,7407.4219 L975.5,7390.4219 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="395.4609" style="stroke: #000000; stroke-width: 2.0;" width="9880.5" x="975.5" y="7390.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="990.5" y="7403.4888">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="419" x="1054.5" y="7402.6323">[if (MaybeConstructLazily(CONTENTAPPEND, aFirstNewContent))]</text><path d="M10861,7395.4219 L10861,7450.4219 L11352,7450.4219 L11352,7405.4219 L11342,7395.4219 L10861,7395.4219 " fill="#FBFB77" filter="url(#f2eqvspei4rxi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M11342,7395.4219 L11342,7405.4219 L11352,7405.4219 L11342,7395.4219 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="470" x="10867" y="7412.4888">We couldn't construct lazily. Make Servo eagerly traverse the new content</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="462" x="10867" y="7427.6216">if needed (when aInsertionKind == InsertionKind::Sync, we know that the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="10867" y="7442.7544">styles are up-to-date already).</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="9462" x2="9504" y1="7428.6875" y2="7428.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="9504" x2="9504" y1="7428.6875" y2="7441.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="9463" x2="9504" y1="7441.6875" y2="7441.6875"/><polygon fill="#A80036" points="9473,7437.6875,9463,7441.6875,9473,7445.6875,9469,7441.6875" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="340" x="9469" y="7423.6216">LazilyStyleNewChildRange(aFirstNewContent, nullptr);</text><path d="M985.5,7456.6875 L1807.5,7456.6875 L1807.5,7463.6875 L1797.5,7473.6875 L985.5,7473.6875 L985.5,7456.6875 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="293.0625" style="stroke: #000000; stroke-width: 2.0;" width="9860.5" x="985.5" y="7456.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="777" x="1000.5" y="7469.7544">void nsCSSFrameConstructor::LazilyStyleNewChildRange(nsIContent* aStartChild, nsIContent* aEndChild)</text><path d="M995.5,7480.8203 L1072.5,7480.8203 L1072.5,7487.8203 L1062.5,7497.8203 L995.5,7497.8203 L995.5,7480.8203 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="261.9297" style="stroke: #000000; stroke-width: 2.0;" width="9840.5" x="995.5" y="7480.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="1010.5" y="7493.8872">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="574" x="1087.5" y="7493.0308">[for (nsIContent* child = aStartChild; child != aEndChild; child = child-&gt;GetNextSibling())]</text><path d="M1005.5,7504.9531 L1069.5,7504.9531 L1069.5,7511.9531 L1059.5,7521.9531 L1005.5,7521.9531 L1005.5,7504.9531 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="230.7969" style="stroke: #000000; stroke-width: 2.0;" width="9820.5" x="1005.5" y="7504.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1020.5" y="7518.02">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="151" x="1084.5" y="7517.1636">[if (child-&gt;IsElement())]</text><polygon fill="#A80036" points="10311,7539.2188,10321,7543.2188,10311,7547.2188,10315,7543.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="9462" x2="10317" y1="7543.2188" y2="7543.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="9469" y="7538.1528">child-&gt;AsElement()-&gt;NoteDirtyForServo();</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="10323" x2="10365" y1="7572.3516" y2="7572.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="10365" x2="10365" y1="7572.3516" y2="7585.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="10324" x2="10365" y1="7585.3516" y2="7585.3516"/><polygon fill="#A80036" points="10334,7581.3516,10324,7585.3516,10334,7589.3516,10330,7585.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="484" x="10330" y="7567.2856">NoteDirtyElement(this, ELEMENT_HAS_DIRTY_DESCENDANTS_FOR_SERVO);</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="10323" x2="10365" y1="7614.4844" y2="7614.4844"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="10365" x2="10365" y1="7614.4844" y2="7627.4844"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="10324" x2="10365" y1="7627.4844" y2="7627.4844"/><polygon fill="#A80036" points="10334,7623.4844,10324,7627.4844,10334,7631.4844,10330,7627.4844" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="328" x="10330" y="7609.4185">Document* doc = aElement-&gt;GetComposedDoc();</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1098.5" x2="1140.5" y1="7656.6172" y2="7656.6172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1140.5" x2="1140.5" y1="7656.6172" y2="7669.6172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1099.5" x2="1140.5" y1="7669.6172" y2="7669.6172"/><polygon fill="#A80036" points="1109.5,7665.6172,1099.5,7669.6172,1109.5,7673.6172,1105.5,7669.6172" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="1105.5" y="7651.5513">doc-&gt;SetServoRestyleRoot(aElement, aBits);</text><path d="M1015.5,7684.6172 L1341.5,7684.6172 L1341.5,7691.6172 L1331.5,7701.6172 L1015.5,7701.6172 L1015.5,7684.6172 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="44.1328" style="stroke: #000000; stroke-width: 2.0;" width="331" x="1015.5" y="7684.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="281" x="1030.5" y="7697.6841">SetServoRestyleRoot(aElement, aBits)</text><path d="M1351.5,7689.6172 L1351.5,7850.6172 L2877.5,7850.6172 L2877.5,7699.6172 L2867.5,7689.6172 L1351.5,7689.6172 " fill="#FBFB77" filter="url(#f2eqvspei4rxi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2867.5,7689.6172 L2867.5,7699.6172 L2877.5,7699.6172 L2867.5,7689.6172 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="375" x="1357.5" y="7706.6841">ここで設定した値がどこで使われるかと言うと↓の流れで使う。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="952" x="1357.5" y="7721.8169">https://searchfox.org/mozilla-central/search?q=symbol:_ZN12nsIPresShell25FlushPendingNotificationsEN7mozilla14ChangesToFlushE&amp;redirect=false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="1505" x="1357.5" y="7736.9497">https://searchfox.org/mozilla-central/search?q=symbol:_ZN7mozilla9PresShell27DoFlushPendingNotificationsENS_14ChangesToFlushE%2C_ZN12nsIPresShell27DoFlushPendingNotificationsEN7mozilla14ChangesToFlushE&amp;redirect=false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="837" x="1357.5" y="7752.0825">https://searchfox.org/mozilla-central/search?q=symbol:_ZN7mozilla14RestyleManager22ProcessPendingRestylesEv&amp;redirect=false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="1026" x="1357.5" y="7767.2153">https://searchfox.org/mozilla-central/search?q=symbol:_ZN7mozilla14RestyleManager24DoProcessPendingRestylesENS_19ServoTraversalFlagsE&amp;redirect=false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="942" x="1357.5" y="7782.3481">https://searchfox.org/mozilla-central/search?q=symbol:_ZN7mozilla13ServoStyleSet13StyleDocumentENS_19ServoTraversalFlagsE&amp;redirect=false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="696" x="1365.5" y="7797.481">- bool ServoStyleSet::StyleDocument(ServoTraversalFlags aFlags)の中で  Servo_TraverseSubtreeとかやってる</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="874" x="1357.5" y="7812.6138">https://searchfox.org/mozilla-central/search?q=symbol:_ZNK7mozilla3dom8Document28GetServoRestyleRootDirtyBitsEv&amp;redirect=false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="1135" x="1357.5" y="7827.7466">https://searchfox.org/mozilla-central/search?q=symbol%3AF_%3CT_mozilla%3A%3Adom%3A%3ADocument%3E_mServoRestyleRootDirtyBits&amp;case=false&amp;regexp=false&amp;path=</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="495" x="1357.5" y="7842.8794">https://searchfox.org/mozilla-central/source/dom/base/DocumentInlines.h#77</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1098.5" x2="1140.5" y1="7707.75" y2="7707.75"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1140.5" x2="1140.5" y1="7707.75" y2="7720.75"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1099.5" x2="1140.5" y1="7720.75" y2="7720.75"/><polygon fill="#A80036" points="1109.5,7716.75,1099.5,7720.75,1109.5,7724.75,1105.5,7720.75" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="8759,7773.8828,8749,7777.8828,8759,7781.8828,8755,7777.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="8753" x2="9461" y1="7777.8828" y2="7777.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="8765" y="7772.8169">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="9462" x2="9504" y1="7814.0156" y2="7814.0156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="9504" x2="9504" y1="7814.0156" y2="7827.0156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="9463" x2="9504" y1="7827.0156" y2="7827.0156"/><polygon fill="#A80036" points="9473,7823.0156,9463,7827.0156,9473,7831.0156,9469,7827.0156" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="305" x="9469" y="7808.9497">StyleNewChildRange(aFirstNewContent, nullptr);</text><polygon fill="#A80036" points="6068.5,7879.0156,6058.5,7883.0156,6068.5,7887.0156,6064.5,7883.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="6062.5" x2="7671.5" y1="7883.0156" y2="7883.0156"/><rect fill="#EEEEEE" filter="url(#f2eqvspei4rxi)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="12141.5" x="3" y="7946.582"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="12144.5" y1="7946.582" y2="7946.582"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="12144.5" y1="7949.582" y2="7949.582"/><rect fill="#EEEEEE" filter="url(#f2eqvspei4rxi)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="146" x="6000.75" y="7936.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="6006.75" y="7952.0825">starttagloop_end</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="8004.2813" y2="8004.2813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="8004.2813" y2="8017.2813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="8017.2813" y2="8017.2813"/><polygon fill="#A80036" points="5233.5,8013.2813,5223.5,8017.2813,5233.5,8021.2813,5229.5,8017.2813" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="326" x="5229.5" y="7999.2153">NS_HTML5_CONTINUE(stateloop); // goto stateloop</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="63" x2="11952" y1="8026.2813" y2="8026.2813"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="159" x="68" y="8036.4917">[default // c == 't', 'm', 'l']</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="8061.2188" y2="8061.2188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="8061.2188" y2="8074.2188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="8074.2188" y2="8074.2188"/><polygon fill="#A80036" points="5233.5,8070.2188,5223.5,8074.2188,5233.5,8078.2188,5229.5,8074.2188" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="279" x="5229.5" y="8056.1528">appendStrBuf(c); //strBuf[strBufLen++] = 0</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="5222.5" x2="5264.5" y1="8103.3516" y2="8103.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5264.5" x2="5264.5" y1="8103.3516" y2="8116.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="5223.5" x2="5264.5" y1="8116.3516" y2="8116.3516"/><polygon fill="#A80036" points="5233.5,8112.3516,5223.5,8116.3516,5233.5,8120.3516,5229.5,8116.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="5229.5" y="8098.2856">continue;</text><rect fill="#EEEEEE" filter="url(#f2eqvspei4rxi)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="12141.5" x="3" y="8172.918"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="12144.5" y1="8172.918" y2="8172.918"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="12144.5" y1="8175.918" y2="8175.918"/><rect fill="#EEEEEE" filter="url(#f2eqvspei4rxi)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="124" x="6011.75" y="8162.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="6017.75" y="8178.4185">stateloop_end</text><polygon fill="#A80036" points="4031,8204.4844,4021,8208.4844,4031,8212.4844,4027,8208.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="4025" x2="5216.5" y1="8208.4844" y2="8208.4844"/><polygon fill="#A80036" points="11225.5,8225.4844,11235.5,8229.4844,11225.5,8233.4844,11229.5,8229.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="4015" x2="11231.5" y1="8229.4844" y2="8229.4844"/><polygon fill="#A80036" points="11838,8239.4844,11848,8243.4844,11838,8247.4844,11842,8243.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="11242.5" x2="11844" y1="8243.4844" y2="8243.4844"/><!--
@startuml all
participant "main thread" as main
participant "nsDocShell" as docShell
participant "nsContentDLF" as dlf
participant "nsHTMLDocument" as document
participant "nsHtml5module" as module
participant "nsContentSink" as sink
participant "nsHtmlParser" as parser
participant "SheetLoadData" as sheetLoadData
participant "Loader" as loader
participant "StreamLoader" as streamLoader
participant "StyleSheet" as styleSheet
participant "servo" as servo
participant "nsHtmlSreamParser" as streamParser
participant "nsHtml5OwningUTF16Buffer(Last buffer)" as lastBuffer
participant "nsHtml5OwningUTF16Buffer" as bufferFunc
participant "nsHtml5Tokenizer" as tokenizer
participant "nsHtml5TreeBuilder" as tokenHandler 
participant "nsHtml5TreeBuilderCppSupplement" as handlerSupplement
participant "nsHtmlStackNode" as stackNode
participant "nsIContent" as content
participant "nsHtml5TreeOperation" as operation
participant "nsNodeUtils" as nodeUtils
participant "nsIPressShell" as pressShell
participant "nsCSSFrameConstructor" as frameConstructor
participant "InsertionPoint" as insertionPoint
participant "nsContainerFrame" as containerFrame
participant "Element" as element
participant "nsHtml5SilentPolicy or nsHtml5ViewSourcePolicy" as policy
participant "nsISerialEventTarget" as eventTarget
participant "nsHtml5Available" as available
participant "Decoder" as decoder
participant "nsHtml5StreamListener" as listener
participant "nsHtml5TreeOpExecutor" as executor
participant "parser thread" as p_thread
participant "recordreplay(name space)" as recordreplay
participant "main thread" as main
participant "nsDocShell" as docShell
participant "nsContentDLF" as dlf
participant "nsHTMLDocument" as document
participant "nsHtml5module" as module
participant "nsContentSink" as sink
participant "nsHtmlParser" as parser
participant "SheetLoadData" as sheetLoadData
participant "Loader" as loader
participant "StreamLoader" as streamLoader
participant "StyleSheet" as styleSheet
participant "servo" as servo
participant "nsHtmlSreamParser" as streamParser
participant "nsHtml5OwningUTF16Buffer(Last buffer)" as lastBuffer
participant "nsHtml5OwningUTF16Buffer" as bufferFunc
participant "nsHtml5Tokenizer" as tokenizer
participant "nsHtml5TreeBuilder" as tokenHandler 
participant "nsHtml5TreeBuilderCppSupplement" as handlerSupplement
participant "nsHtmlStackNode" as stackNode
participant "nsIContent" as content
participant "nsHtml5TreeOperation" as operation
participant "nsNodeUtils" as nodeUtils
participant "nsIPressShell" as pressShell
participant "nsCSSFrameConstructor" as frameConstructor
participant "InsertionPoint" as insertionPoint
participant "nsContainerFrame" as containerFrame
participant "Element" as element
participant "nsHtml5SilentPolicy or nsHtml5ViewSourcePolicy" as policy
participant "nsISerialEventTarget" as eventTarget
participant "nsHtml5Available" as available
participant "Decoder" as decoder
participant "nsHtml5StreamListener" as listener
participant "nsHtml5TreeOpExecutor" as executor
participant "parser thread" as p_thread
participant "recordreplay(name space)" as recordreplay

group nsresult nsDocShell::NewContentViewerObj()
    docShell -> dlf 
    group nsContentDLF::CreateInstance()
        dlf -> dlf : aDocumentCreator : () -> {NS_NewHTMLDocument(getter_AddRefs(doc))}
        group nsContentDLF::CreateDocument(nsContentDLF::DocumentCreator aDocumentCreator,)
            dlf -> dlf : RefPtr<Document> doc = aDocumentCreator();
            group NS_NewHTMLDocument

            end
            group StartDocumentLoad
                dlf -> document : rv = doc->StartDocumentLoad(\naCommand, aChannel, aLoadGroup, aContainer, DocListener, true);
                    document -> document : mParser = nsHtml5Module::NewHtml5Parser(); L552
                    document -> sink : nsCOMPtr<nsIHTMLContentSink> htmlsink;
                    document <- sink
                    document -> sink : NS_NewHTMLContentSink(getter_AddRefs(htmlsink), this, uri, docShell, aChannel);
                    group NS_NewHTMLContentSink
                        sink -> sink : it = new HTMLContentSink();
                        sink -> sink : nsresult rv = it->Init(aDoc, aURI, aContainer, aChannel);
                        group nsContentSink::Init(Document* aDoc, nsIChannel* aChannel)
                            group header情報の取得
                                sink -> sink : nsCOMPtr<nsIHttpChannel> httpchannel(do_QueryInterface(aChannel))
                                sink -> sink : nsAutoCString linkHeader;
                                sink -> sink : nsresult rv = httpchannel->GetResponseHeader(NS_LITERAL_CSTRING("link"), linkHeader);
                                document <- sink : mDocument->SetHeaderData(nsGkAtoms::link, NS_ConvertASCIItoUTF16(linkHeader));
                            end
                            sink -> sink : mDocument = aDoc;
                            sink -> sink : ProcessHTTPHeaders(aChannel);
                            group ProcessHTTPHeaders()
                                sink -> sink : mProcessLinkHeaderEvent = NewNonOwningRunnableMethod(\n"nsContentSink::DoProcessLinkHeader",\n this,\n &nsContentSink::DoProcessLinkHeader);
                                main <- sink : rv = NS_DispatchToCurrentThread(mProcessLinkHeaderEvent.get()); 現在のthreadにイベントを投げつける
                            end
                        end
                    end
                    document <- sink
                    document -> parser : mParser->SetContentSink(htmlsink); //L691, mParserはaDocumentCreator内で作られているのか? -> 同じメソッド内でmParser = nsHtml5Module::NewHtml5Parser()されていた
                dlf <- document
            end
        end
    end
    docShell <- dlf
end
group nsContentSink::DoProcessLinkHeader
  document <- sink : mDocument->GetHeaderData(nsGkAtoms::link, value); その前にSetHeaderDataが呼ばれているはず(Initでしていた)
  group GetHeaderData
  end
  sink -> sink : ProcessLinkHeader(value);
  group ProcessLinkHeader
  end
end
participant "main thread" as main
participant "nsDocShell" as docShell
participant "nsContentDLF" as dlf
participant "nsHTMLDocument" as document
participant "nsHtml5module" as module
participant "nsContentSink" as sink
participant "nsHtmlParser" as parser
participant "SheetLoadData" as sheetLoadData
participant "Loader" as loader
participant "StreamLoader" as streamLoader
participant "StyleSheet" as styleSheet
participant "servo" as servo
participant "nsHtmlSreamParser" as streamParser
participant "nsHtml5OwningUTF16Buffer(Last buffer)" as lastBuffer
participant "nsHtml5OwningUTF16Buffer" as bufferFunc
participant "nsHtml5Tokenizer" as tokenizer
participant "nsHtml5TreeBuilder" as tokenHandler 
participant "nsHtml5TreeBuilderCppSupplement" as handlerSupplement
participant "nsHtmlStackNode" as stackNode
participant "nsIContent" as content
participant "nsHtml5TreeOperation" as operation
participant "nsNodeUtils" as nodeUtils
participant "nsIPressShell" as pressShell
participant "nsCSSFrameConstructor" as frameConstructor
participant "InsertionPoint" as insertionPoint
participant "nsContainerFrame" as containerFrame
participant "Element" as element
participant "nsHtml5SilentPolicy or nsHtml5ViewSourcePolicy" as policy
participant "nsISerialEventTarget" as eventTarget
participant "nsHtml5Available" as available
participant "Decoder" as decoder
participant "nsHtml5StreamListener" as listener
participant "nsHtml5TreeOpExecutor" as executor
participant "parser thread" as p_thread
participant "recordreplay(name space)" as recordreplay

main -> sink : rv = NS_DispatchToCurrentThread(mProcessLinkHeaderEvent.get()); // 多分main threadなんだろうけど調べてない
group nsContentSink::DoProcessLinkHeader
  document <- sink : mDocument->GetHeaderData(nsGkAtoms::link, value); その前にSetHeaderDataが呼ばれているはず(Initでしていた)
  group GetHeaderData
  end
  sink -> sink : ProcessLinkHeader(value);
  group ProcessLinkHeader
    group ProcessLinkFromHeader
      group ProcessStyleLinkFromHeader
        group Loader::LoadStyleLink
          sink -> sheetLoadData : SheetLoadData* data = new SheetLoadData(this, aInfo.mTitle, aInfo.mURI, sheet, syncLoad, owningElement, isAlternate, matched, aObserver, principal, context);
          note left
            * OVERALL ARCHITECTURE
            *
            * The CSS Loader gets requests to load various sorts of style sheets:
            * inline style from <style> elements, linked style, @import-ed child
            * sheets, non-document sheets.  The loader handles the following tasks:
            * 1) Creation of the actual style sheet objects: CreateSheet()
            * 2) setting of the right media, title, enabled state, etc on the
            *    sheet: PrepareSheet()
            * 3) Insertion of the sheet in the proper cascade order:
            *    InsertSheetInTree() and InsertChildSheet()
            * 4) Load of the sheet: LoadSheet() including security checks
            * 5) Parsing of the sheet: ParseSheet()
            * 6) Cleanup: SheetComplete()
            *
            * The detailed documentation for these functions is found with the
            * function implementations.
            *
            * The following helper object is used:
            *    SheetLoadData - - a small class that is used to store all the
            *                     information needed for the loading of a sheet;
            *                     this class handles listening for the stream
            *                     loader completion and also handles charset
            *                     determination.
          end note
          sink -> loader : rv = LoadSheet(data, state, false);
          group Loader::LoadSheet
            loader -> streamLoader : streamLoader = new StreamLoader(aLoadData);
            loader <- streamLoader
          end
          note left
            LoadSheet handles the actual load of a sheet.  If the load is
            supposed to be synchronous it just opens a channel synchronously
            using the given uri, wraps the resulting stream in a converter
            stream and calls ParseSheet.  Otherwise it tries to look for an
            existing load for this URI and piggyback on it.  Failing all that,
            a new load is kicked off asynchronously.
          end note
        end
      end
    end
  end
end

streamLoader -> streamLoader : OnStopRequest
group StreamLoader::OnStopRequest
  streamLoader -> loader : mSheetLoadData->mLoader->ParseSheet(utf8String, mSheetLoadData, Loader::AllowAsyncParse::Yes);
  group Loader::ParseSheet
    loader-> styleSheet : StyleSheet* sheet = aLoadData->mSheet;
    loader -> styleSheet :   sheet->ParseSheet(this, aBytes, aLoadData)->Then(...)
    group StyleSheet::ParseSheet
      loader -> servo : Servo_StyleSheet_FromUTF8BytesAsync
    end
  end
end
participant "main thread" as main
participant "nsDocShell" as docShell
participant "nsContentDLF" as dlf
participant "nsHTMLDocument" as document
participant "nsHtml5module" as module
participant "nsContentSink" as sink
participant "nsHtmlParser" as parser
participant "SheetLoadData" as sheetLoadData
participant "Loader" as loader
participant "StreamLoader" as streamLoader
participant "StyleSheet" as styleSheet
participant "servo" as servo
participant "nsHtmlSreamParser" as streamParser
participant "nsHtml5OwningUTF16Buffer(Last buffer)" as lastBuffer
participant "nsHtml5OwningUTF16Buffer" as bufferFunc
participant "nsHtml5Tokenizer" as tokenizer
participant "nsHtml5TreeBuilder" as tokenHandler 
participant "nsHtml5TreeBuilderCppSupplement" as handlerSupplement
participant "nsHtmlStackNode" as stackNode
participant "nsIContent" as content
participant "nsHtml5TreeOperation" as operation
participant "nsNodeUtils" as nodeUtils
participant "nsIPressShell" as pressShell
participant "nsCSSFrameConstructor" as frameConstructor
participant "InsertionPoint" as insertionPoint
participant "nsContainerFrame" as containerFrame
participant "Element" as element
participant "nsHtml5SilentPolicy or nsHtml5ViewSourcePolicy" as policy
participant "nsISerialEventTarget" as eventTarget
participant "nsHtml5Available" as available
participant "Decoder" as decoder
participant "nsHtml5StreamListener" as listener
participant "nsHtml5TreeOpExecutor" as executor
participant "parser thread" as p_thread
participant "recordreplay(name space)" as recordreplay

activate main 
create document
main -> document : create?
main <- document
deactivate main 

main -> document : do_QueryInterface
activate main 
activate document 
    document -> module : nsHtml5module::NewHtml5Parser()
    activate module
        create parser
        module -> parser : new Html5Parser()
        activate parser
            create executor
            parser -> executor : mExecutor(new nsHtml5TreeOpExecutor())
            activate executor
            parser <- - executor
            deactivate executor
        module <- - parser : Html5Parser
        deactivate parser
    document <- - module : Html5Parser
    deactivate module

    document -> parser : MarkAsNotScriptCreated()
    activate parser
         create streamParser
         parser -> streamParser : new nsHtml5StreamParser
         activate streamParser
           create lastBuffer
           streamParser -> lastBuffer
           activate lastBuffer
           streamParser <- - lastBuffer
           deactivate lastBuffer

            create builder
            streamParser -> builder
            activate builder
            streamParser <- - builder
            deactivate builder

            create tokenizer
            streamParser -> tokenizer : with builder
            activate tokenizer
            streamParser <- - tokenizer
            deactivate tokenizer

           create eventTarget
           streamParser -> eventTarget : initialize(nsHtml5Module\n::GetStreamParserThread()\n->SerialEventTarget())
           activate eventTarget
           streamParser <- - eventTarget
           deactivate eventTarget
         parser <- - streamParser
         deactivate streamParser

         create listener
         parser -> listener : new nsHtml5StreamListener(streamParser)
         activate listener
         parser <- - listener
         deactivate listener
    document <- parser
    deactivate parser
main <- document
deactivate document 
deactivate main

document -> parser : nsHtml5Parser::Parse()
activate parser
    parser -> listener : GetDelegate();
    activate listener
    parser <- listener : mDelegate === streamParser
    deactivate listener

    parser -> executor : SetStreamParser(streamParser)
    activate executor
    parser <- executor
    deactivate executor

    parser -> executor : SetParser(this)
    activate executor
    parser <- executor
    deactivate executor
document <- - parser
deactivate parser

main -> listener : OnStartRequest
activate main
activate listener
    streamParser <- listener : OnStartRequest
    activate streamParser
          streamParser -> tokenizer : mTokenizer->start()
          activate tokenizer
            tokenizer -> tokenizer : mode = INITIAL
          streamParser <- - tokenizer
          deactivate tokenizer

          streamParser -> streamParser : mFirstBuffer = mLastBuffer = newBuf;
    streamParser - -> listener 
    deactivate streamParser

main <- - listener
deactivate main
deactivate listener

main -> listener : OnDataAvailable
activate main
activate listener
    streamParser <- listener : OnDataAvailable
    activate streamParser
        create available
        streamParser -> available : new nsHtml5Available

        streamParser -> eventTarget : mEventTarget->Dispatch\n Dispatchの実装はnsIEventTarget.hにある
        activate eventTarget
            eventTarget -> p_thread : Dispatch
            activate p_thread
            deactivate p_thread
        streamParser <- - eventTarget
        deactivate eventTarget

    streamParser - -> listener
    deactivate streamParser
main <- - listener
deactivate listener
deactivate main

available <- p_thread : Run()
activate p_thread
activate available
  streamParser <- available : mStreamParser->DoDataAvailable()
  activate streamParser
    group streamParser::WriteStreamBytes()
        loop
            streamParser -> lastBuffer : auto dst = mLastBuffer->TailAsSpan(NS_HTML5_STREAM_PARSER_READ_BUFFER_SIZE); bufferへのpointerを取得
            activate lastBuffer
            streamParser <- - lastBuffer
            deactivate lastBuffer

            streamParser -> decoder : DecodeToUTF16(src, dst, false); // pointerに書き込み
            activate decoder
            streamParser <- - decoder
            deactivate decoder
            streamParser -> recordreplay : AddContentParseData16(this, dst.data(), written)
            activate recordreplay
            streamParser <- recordreplay
            deactivate recordreplay

            streamParser - -> streamParser : src = src.From(read)

            streamParser -> bufferFunc : RefPtr<nsHtml5OwningUTF16Buffer> newBuf = nsHtml5OwningUTF16Buffer::FalliblyCreate(READ_BUFFER_SIZE); //新規bufferの確保
            activate bufferFunc
            streamParser <- - bufferFunc
            deactivate bufferFunc
            
            streamParser -> lastBuffer : mLastBuffer = (mLastBuffer->next = newBuf.forget()); //新規bufferをappend
            activate lastBuffer
            streamParser <- - lastBuffer
            deactivate lastBuffer
        end
    end

    group   ParseAvailableData()
        loop
        end
        streamParser -> tokenizer : mLastWasCR = mTokenizer->tokenizeBuffer(mFirstBuffer);
        activate tokenizer
participant "main thread" as main
participant "nsDocShell" as docShell
participant "nsContentDLF" as dlf
participant "nsHTMLDocument" as document
participant "nsHtml5module" as module
participant "nsContentSink" as sink
participant "nsHtmlParser" as parser
participant "SheetLoadData" as sheetLoadData
participant "Loader" as loader
participant "StreamLoader" as streamLoader
participant "StyleSheet" as styleSheet
participant "servo" as servo
participant "nsHtmlSreamParser" as streamParser
participant "nsHtml5OwningUTF16Buffer(Last buffer)" as lastBuffer
participant "nsHtml5OwningUTF16Buffer" as bufferFunc
participant "nsHtml5Tokenizer" as tokenizer
participant "nsHtml5TreeBuilder" as tokenHandler 
participant "nsHtml5TreeBuilderCppSupplement" as handlerSupplement
participant "nsHtmlStackNode" as stackNode
participant "nsIContent" as content
participant "nsHtml5TreeOperation" as operation
participant "nsNodeUtils" as nodeUtils
participant "nsIPressShell" as pressShell
participant "nsCSSFrameConstructor" as frameConstructor
participant "InsertionPoint" as insertionPoint
participant "nsContainerFrame" as containerFrame
participant "Element" as element
participant "nsHtml5SilentPolicy or nsHtml5ViewSourcePolicy" as policy
participant "nsISerialEventTarget" as eventTarget
participant "nsHtml5Available" as available
participant "Decoder" as decoder
participant "nsHtml5StreamListener" as listener
participant "nsHtml5TreeOpExecutor" as executor
participant "parser thread" as p_thread
participant "recordreplay(name space)" as recordreplay


group  nsHtml5Tokenizer::stateLoop
== stateloop ==
loop for(;;)
    alt switch(state) == DATA
        loop for(;;)
            tokenizer -> tokenizer : ++pos == endPos; // 1文字進める
            tokenizer -> tokenizer : c = checkChar(buf, pos); // 1文字バッファに読む
            alt switch(c) == '<' // c == '<'
                tokenizer -> tokenizer : flushChars(buf, pos); // バッファをclear
                tokenizer -> tokenizer : state = P::transition(mViewSource, nsHtml5Tokenizer::TAG_OPEN, reconsume, pos); stateをTAG_OPENにする
                tokenizer -> tokenizer : NS_HTML5_BREAK(dataloop); // goto dataloop_end
            else 
            end
        end
        == dataloop_end ==
    else switch(state) == TAG_OPEN
        loop for(;;)
            tokenizer -> tokenizer : ++pos == endPos; // 1文字進める
            tokenizer -> tokenizer : c = checkChar(buf, pos); // 1文字バッファに読む
            alt if (c >= 'a' && c <= 'z') // c == 'h'
                tokenizer -> tokenizer : endTag = false;
                tokenizer -> tokenizer : clearStrBufBeforeUse(); //strBufLen = 0
                tokenizer -> tokenizer : appendStrBuf(c); // strBuf[strBufLen++] = c 
                tokenizer -> tokenizer : containsHyphen = false;
                tokenizer -> tokenizer : state = P::transition(mViewSource, nsHtml5Tokenizer::TAG_NAME, reconsume, pos); // stateをTAG_NAMEにする
                tokenizer -> tokenizer : NS_HTML5_BREAK(tagopenloop); // goto tagopenloop_end
            else
            end
        end
        == tagopenloop_end ==
    else switch(state) == TAG_NAME
        loop for(;;)
            tokenizer -> tokenizer : ++pos == endPos; // 1文字進める
            tokenizer -> tokenizer : c = checkChar(buf, pos); // 1文字バッファに読む
            alt switch (c) == '>' // c == '>'
                tokenizer -> tokenizer : strBufToElementNameString(); // nsHtml5ElementName* tagNameにstrBufferから生成して入れてる。strBufLenは0にされる。
                tokenizer -> tokenizer : state = P::transition(mViewSource, emitCurrentTagToken(false, pos), reconsume, pos); // stateをnsHtml5Tokenizer::DATAにする
                group nsHtml5Tokenizer::emitCurrentTagToken(bool selfClosing, int32_t pos)
                    tokenizer -> tokenHandler : startTag(tagName, attrs, selfClosing);
                    note left 
                        tagName: 'html'
                        attrs: EMPTY_ATTRIBUTES
                        selfClosing: false
                    end note
                    group  nsHtml5TreeBuilder::startTag(nsHtml5ElementName* elementName, nsHtml5HtmlAttributes* attributes, bool selfClosing)
                        loop for(;;)
                            tokenHandler -> tokenHandler : int32_t group = elementName->getGroup();
                            tokenHandler -> tokenHandler : nsAtom* name = elementName->getName(); 
                            alt switch (mode) == INITIAL 
                                tokenHandler -> tokenHandler : errStartTagWithoutDoctype();
                                tokenHandler -> tokenHandler : documentModeInternal(QUIRKS_MODE, nullptr, nullptr, false);
                                tokenHandler -> tokenHandler : mode = BEFORE_HTML;
                                tokenHandler -> tokenHandler : continue;
                            else case BEFORE_HTML
                                alt switch (group)  == case HTML
                                    alt if attributes == nsHtml5HtmlAttributes::EMPTY_ATTRIBUTES 
                                      group appendHtmlElementToDocumentAndPush();
                                        tokenHandler -> tokenHandler : appendHtmlElementToDocumentAndPush(tokenizer->emptyAttributes());
                                            group appendHtmlElementToDocumentAndPush(nsHtml5HtmlAttributes* attributes)
                                                tokenHandler -> handlerSupplement : nsIContentHandle* elt = createHtmlElementSetAsRoot(attributes);
                                                    group nsIContentHandle* nsHtml5TreeBuilder::createHtmlElementSetAsRoot
                                                        handlerSupplement -> handlerSupplement : nsHtml5ContentCreatorFunction creator;
                                                        handlerSupplement -> handlerSupplement : creator.html = NS_NewHTMLSharedElement;
                                                        handlerSupplement -> handlerSupplement : nsIContentHandle* content = createElement(kNameSpaceID_XHTML, nsGkAtoms::html, aAttributes, nullptr, creator);
                                                        group createElement(int32_t aNamespace, nsAtom* aName, nsHtml5HtmlAttributes* aAttributes, nsIContentHandle* aIntendedParent, nsHtml5ContentCreatorFunction aCreator)
                                                            handlerSupplement -> operation : elem = nsHtml5TreeOperation::CreateHTMLElement(aName, aAttributes, mozilla::dom::FROM_PARSER_FRAGMENT, nodeInfoManager, mBuilder, aCreator.html);
                                                            note left
                                                              aAttributesはappendHtmlElementToDocumentAndPushに渡されたempty_attributes(nullptr)
                                                              nodeInfoManagerはmBuilder->GetNodeInfoManager()
                                                              mBuilder : nsHtml5OplessBuilder
                                                            end note
                                                            group nsHtml5TreeOperation::CreateHTMLElement(nsAtom* aName, nsHtml5HtmlAttributes* aAttributes, mozilla::dom::FromParser aFromParser, nsNodeInfoManager* aNodeInfoManager, nsHtml5DocumentBuilder* aBuilder, mozilla::dom::HTMLContentCreatorFunction aCreator)
                                                            end
                                                            handlerSupplement <- - operation : return elem;
                                                        end
                                                        handlerSupplement -> operation : nsresult rv = nsHtml5TreeOperation::AppendToDocument(static_cast<nsIContent*>(content), mBuilder);
                                                        group nsHtml5TreeOperation::AppendToDocument(nsIContent* aNode, nsHtml5DocumentBuilder* aBuilder)
                                                        end
                                                        handlerSupplement <- - operation
                                                    end
                                                tokenHandler <- - handlerSupplement : return content; : nsIContentHandle* elt

                                                tokenHandler -> tokenHandler : nsHtml5StackNode* node = createStackNode(nsHtml5ElementName::ELT_HTML, elt);
                                                tokenHandler -> tokenHandler : push(node);
                                            end
                                      end
                                    else
                                      tokenHandler -> tokenHandler : appendHtmlElementToDocumentAndPush(attributes);
                                    end
                                        tokenHandler -> tokenHandler : mode = BEFORE_HEAD;
                                        tokenHandler -> tokenHandler : attributes = nullptr;
                                        tokenHandler -> tokenHandler : NS_HTML5_BREAK(starttagloop); // goto startagloop_end
                                else default
                                end
                            else  case IN_BODY
                                alt switch (group)  == case HTML
                                else  case DIV_OR_BLOCKQUOTE_OR_CENTER_OR_MENU
                                    group appendToCurrentNodeAndPushElementMayFoster(elementName, attributes)
                                        group nsHtml5TreeBuilder::appendElement(aChild: elt, aParent: current->node)
                                            tokenHandler -> stackNode : current->node
                                            stackNode -> content : current->node
                                            tokenHandler -> operation
                                            group nsHtml5TreeOperation::Append(nsIContent* aNode, nsIContent* aParent, nsHtml5DocumentBuilder* aBuilder)
                                                operaton -> operation : nsHtml5OtherDocUpdate update(aParent->OwnerDoc(), aBuilder->GetDocument())
                                                tokenHandler -> content : aParent->AppendChildTo(aNode, false)
                                                tokenHandler -> content : aNode->SetParserHasNotified(); aNodeはcurrentNodeから作ったnsIContent
                                                operation -> nodeUtils : nsNodeUtils::ContentAppended(aParent, aNode)
                                                group nsNodeUtils::ContentAppended(nsIContent* aContainer, nsIContent* aFirstNewContent)
                                                    nodeUtils -> content : Document* doc = aContainer->OwnerDoc(); // rootのhtml documentを取得
                                                    content -> content : doc->Changed();
                                                    nodeUtils -> nodeUtils : IMPL_MUTATION_NOTIFICATION(ContentAppended, aContainer, (aFirstNewContent), IsRemoveNotification::No);
                                                    group IMPL_MUTATION_NOTIFICATION(func_, content_, params_, remove_)  
                                                        nodeUtils -> document : nsIPresShell* shell = doc->GetObservingShell() 
                                                        nodeUtils -> pressShell : shell->func_ params_;
participant "main thread" as main
participant "nsDocShell" as docShell
participant "nsContentDLF" as dlf
participant "nsHTMLDocument" as document
participant "nsHtml5module" as module
participant "nsContentSink" as sink
participant "nsHtmlParser" as parser
participant "SheetLoadData" as sheetLoadData
participant "Loader" as loader
participant "StreamLoader" as streamLoader
participant "StyleSheet" as styleSheet
participant "servo" as servo
participant "nsHtmlSreamParser" as streamParser
participant "nsHtml5OwningUTF16Buffer(Last buffer)" as lastBuffer
participant "nsHtml5OwningUTF16Buffer" as bufferFunc
participant "nsHtml5Tokenizer" as tokenizer
participant "nsHtml5TreeBuilder" as tokenHandler 
participant "nsHtml5TreeBuilderCppSupplement" as handlerSupplement
participant "nsHtmlStackNode" as stackNode
participant "nsIContent" as content
participant "nsHtml5TreeOperation" as operation
participant "nsNodeUtils" as nodeUtils
participant "nsIPressShell" as pressShell
participant "nsCSSFrameConstructor" as frameConstructor
participant "InsertionPoint" as insertionPoint
participant "nsContainerFrame" as containerFrame
participant "Element" as element
participant "nsHtml5SilentPolicy or nsHtml5ViewSourcePolicy" as policy
participant "nsISerialEventTarget" as eventTarget
participant "nsHtml5Available" as available
participant "Decoder" as decoder
participant "nsHtml5StreamListener" as listener
participant "nsHtml5TreeOpExecutor" as executor
participant "parser thread" as p_thread
participant "recordreplay(name space)" as recordreplay

group PresShell::ContentAppended(nsIContent* aFirstNewContent) 
    pressShell -> frameConstructor : mFrameConstructor->ContentAppended(aFirstNewContent, nsCSSFrameConstructor::InsertionKind::Async); 
    group nsCSSFrameConstructor::ContentAppended(nsIContent* aFirstNewContent, InsertionKind aInsertionKind) 
        frameConstructor -> frameConstructor : InsertionPoint insertion = GetRangeInsertionPoint(aFirstNewContent, nullptr, aInsertionKind);
        frameConstructor -> insertionPoint : nsContainerFrame*& parentFrame = insertion.mParentFrame;
        alt if (!parentFrame)
            alt if (aInsertionKind == InsertionKind::Async) 
                frameConstructor -> frameConstructor : LazilyStyleNewChildRange(aFirstNewContent, nullptr);
            end
            note left
                We're punting on frame construction because there's no container frame.
                The Servo-backed style system handles this case like the lazy frame
                construction case, except when we're already constructing frames, in
                which case we shouldn't need to do anything else.

            end note
            pressShell <- frameConstructor : return;
        end

        alt if (aInsertionKind == InsertionKind::Async)
            alt if (MaybeConstructLazily(CONTENTAPPEND, aFirstNewContent))
                frameConstructor -> frameConstructor : LazilyStyleNewChildRange(aFirstNewContent, nullptr);
                group void nsCSSFrameConstructor::LazilyStyleNewChildRange(nsIContent* aStartChild, nsIContent* aEndChild)
                    loop for (nsIContent* child = aStartChild; child != aEndChild; child = child->GetNextSibling())
                        alt  if (child->IsElement())
                            frameConstructor -> element : child->AsElement()->NoteDirtyForServo();
                            element -> element :  NoteDirtyElement(this, ELEMENT_HAS_DIRTY_DESCENDANTS_FOR_SERVO);
                                element -> element : Document* doc = aElement->GetComposedDoc();
                                document -> document : doc->SetServoRestyleRoot(aElement, aBits);
                                group SetServoRestyleRoot(aElement, aBits)
                                  document -> document
                                end
                                note left
                                    ここで設定した値がどこで使われるかと言うと↓の流れで使う。
                                    https://searchfox.org/mozilla-central/search?q=symbol:_ZN12nsIPresShell25FlushPendingNotificationsEN7mozilla14ChangesToFlushE&redirect=false
                                    https://searchfox.org/mozilla-central/search?q=symbol:_ZN7mozilla9PresShell27DoFlushPendingNotificationsENS_14ChangesToFlushE%2C_ZN12nsIPresShell27DoFlushPendingNotificationsEN7mozilla14ChangesToFlushE&redirect=false
                                    https://searchfox.org/mozilla-central/search?q=symbol:_ZN7mozilla14RestyleManager22ProcessPendingRestylesEv&redirect=false
                                    https://searchfox.org/mozilla-central/search?q=symbol:_ZN7mozilla14RestyleManager24DoProcessPendingRestylesENS_19ServoTraversalFlagsE&redirect=false
                                    https://searchfox.org/mozilla-central/search?q=symbol:_ZN7mozilla13ServoStyleSet13StyleDocumentENS_19ServoTraversalFlagsE&redirect=false
                                      - bool ServoStyleSet::StyleDocument(ServoTraversalFlags aFlags)の中で  Servo_TraverseSubtreeとかやってる
                                    https://searchfox.org/mozilla-central/search?q=symbol:_ZNK7mozilla3dom8Document28GetServoRestyleRootDirtyBitsEv&redirect=false
                                    https://searchfox.org/mozilla-central/search?q=symbol%3AF_%3CT_mozilla%3A%3Adom%3A%3ADocument%3E_mServoRestyleRootDirtyBits&case=false&regexp=false&path=
                                    https://searchfox.org/mozilla-central/source/dom/base/DocumentInlines.h#77
                                end note
                        end
                    end
                end
                pressShell <- frameConstructor : return
            end
            note left 
                We couldn't construct lazily. Make Servo eagerly traverse the new content
                if needed (when aInsertionKind == InsertionKind::Sync, we know that the
                styles are up-to-date already).
            end note
            frameConstructor -> frameConstructor : StyleNewChildRange(aFirstNewContent, nullptr);
        end
    end
end
note left
aFirstNewContent: currentNodeから作ったnsIContent
end note

                                                    end
                                                end
                                            end
                                            note left
                                              //frame
                                            end note
                                            tokenHandler <- operation
                                        end
                                    end
                                end

                            end
                        end
                        == starttagloop_end ==
                    end
                end
                tokenizer -> tokenizer : NS_HTML5_CONTINUE(stateloop); // goto stateloop
            else default // c == 't', 'm', 'l'
                tokenizer -> tokenizer : appendStrBuf(c); //strBuf[strBufLen++] = 0
                tokenizer -> tokenizer : continue;
            end
        end
    end
end
== stateloop_end == 
end

        streamParser <- - tokenizer
        deactivate tokenizer
    end
  streamParser - -> available
  deactivate streamParser
available - -> p_thread
deactivate available
deactivate p_thread

@enduml

PlantUML version 1.2019.03(Sun Mar 10 20:04:44 JST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_191-8u191-b12-2ubuntu0.18.04.1-b12
Operating System: Linux
OS Version: 4.15.0-47-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>